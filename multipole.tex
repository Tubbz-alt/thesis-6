\documentclass[11pt,a4paper]{memoir}
\def\asydir{\jobname}
\usepackage{thesis-preamble}
\EndPreamble
\begin{document}

\chapter{Multipole arrays for improved levitation}
\chaplabel{multipole}

\referpaper{The material presented in \secref{optim-halbach-1d} is based on work that has been published as a journal paper~\cite{robertson2010-maglett}.}

\section{Introduction}

\textcite{backers1961} developed a theory for magnetic bearings
by assuming the effect of curvature of the ring magnets to be
negligible and looking at the forces between two large flat
plates. He showed that a periodically recurring magnetisation
yields stronger forces than a simple homogeneous one. He
implements this coarsely in an active magnetic bearing with
cross-section shown previously in \figref{backers-bearing}.

\begin{figure}
\includegraphics{PhD/Figures/Multipole/halbach.pdf}
\caption
  [Magnetic flux lines of a Halbach array.]
  {
    Magnetic field lines for a multipole array with \ang{45} magnetisation rotations (indicated by the arrowheads).
    The single-sided nature of the magnet field is evident.
  }
\figlabel{halbach}
\end{figure}

It was not until the wide-spread availability of the high energy
density rare-earth magnets in the late 1970s that magnetic
geometries more complicated than
\citeauthor{backers1961}' % no extra 's'
became feasible. \textcite{halbach1980} pioneered the research
on these `multi-pole' magnet arrangements, showing how the ideal
case of sinusoidal magnetisation may be approximated with a
structure made up from discrete magnets as shown in
\figref{halbach}.
This figure shows magnets with \ang{45} increments of magnetisation, but any integer division of \ang{360} is possible.
Parallel work at the time also presented the curious single-sided nature of the magnetic flux from such multiple arrangements \cite{shute2000-ietm}.
When discrete magnets are used, the single-sided field is only approximated, but can still result in dramatic differences in magnetic field magnitude from one side of the array to the other.
\Figref{halbach-lion} shows three Halbach arrays.
They are arranged all in repulsion, but the top two have their strong sides facing whereas the bottom two have their weak sides facing.
In this static arrangement, the forces between the strong pair are about 200 times stronger than the weak pair.

Forces between magnets are governed by their field strengths, so
it is a natural conclusion that two facing Halbach arrays will
have greater forces between them than single magnets of the same
size. \textcite{yonnet1991} examined this effect relating to the
stiffness of rotary bearings. They show that with bearings with
\ang{90} rotations between successive magnets (as opposed to
\citeauthor{backers1961}' % no extra 's'
bearing which used \ang{180}
increments), the stiffness can be approximately doubled while
keeping the magnet volume constant.

\begin{figure}[htbp]
   \centering
   \grf[height=0.4\textheight]{Figures/Multipole/halbach-lion-fieldstr}
   \caption{Opposing Halbach arrays in the strong and weak fields.}
   \figlabel{halbach-lion}
\end{figure}

As well as increasing the stength of the magnetic field in the desired area of use, this had the added advantage of `shielding' external equipment from the field where the magnetic forces are not required, although there are other various possiblities to effect magnetic shielding \cite{becherini2009}.
Such inherent shielding makes these arrays particularly beneficial in \maglev/ transportation \cite{hoburg2004}, predominantly to ensure that the magnetic field is not strong enough to affect passengers.


An examination of the flux lines of various facing Halbach arrays, as shown in
\figref{halbach-flux-repl,halbach-flux-attr}, shows how flux interacts between
the two separate linear arrays. It can be seen that simply by varying the
direction of magnetisation of the first magnet in the second array, a full
sinusoid of forces can be achieved between the arraysâ€”at the limits, total
attraction or repulsion in the vertical direction, as for
\figref{halbach-flux-repl,halbach-flux-attr} respectively.

\begin{figure}
\begin{wide}
  \begin{subfigure}
  \grf{Figures/Multipole/2-halb-repl}
  \caption{In repulsion.}
  \figlabel{halbach-flux-repl}
\end{subfigure}\hfil
\begin{subfigure}
  \grf{Figures/Multipole/2-halb-attr}
  \caption{In attraction.}
  \figlabel{halbach-flux-attr}
\end{subfigure}
\end{wide}
\caption{Magnetic field lines of linear multipole arrays.}
\end{figure}

In this configuration, then, this restricts the relative lateral motion to
each other that the springs can experience. A slip by two magnet lengths, and
the spring will no longer be supporting load---it will be firmly attracted to
its former opposer! In practise, this is not a concern. The operation of the
spring is design such that free motion is opposed in the lateral directions,
and will be implemented with a physical stop (only at the extremes of
displacement so as to remain non-contact, of course) to prevent calamity of
this sort.




\textcite{trumper1996} developed the electromagnetic analogue to the
Halbach array: a triangular coil-winding arrangement that produces
sinusoidal and predominantly single-sided flux. This technique could
prove especially well suited to generating forces against permanent
magnet arrays.

\textcite{xia2008-ietm} calculates \threeD/ torque from a spherical multipole actuator.


\textcite{moser2006} showed an optimum configuration for a bearing
with alternating magnetisations in the axial direction (it is rather
difficult to radially magnetise a ring or disc magnet).

\textcite{chen2002} used stacked magnets of various sizes (with the
largest magnet rings midway between the inner and outer radii of the
bearing) in order to maximise the stiffness per cross sectional area of the
array.

\textcite{meessen2008-ietm} analysed quasi-Halbach and trapezoidal linear multipole arrays for slotless tubular actuators.
The trapezoidal shaped magnets are shown to generate slightly higher forces.

\textcite{choi2008}




\textcite{janssen2009-ietm} have derived expressions to calculate the analytical forces between pyramidal-frustrum shaped magnets, which expressions have not yet been published at time of writing.
\textcite{lee2006-mx} and \textcite{cho2001} present different planar arrays using block magnets with trapezoidal and triangular cross-sections, and \textcite{yan2006-iemx} calculate torque for spherical multipole arrays with `dihedral cone'-shaped magnets. And there are a wide variety of cylindrical multipole arrays in use for bearing and brushless motor applications \parencite{zhu2001-ipep}.



Applications:
artificial hearts \parencite{finocchiaro2008,samiappan2008}
wave power generation \parencite{kimoulakis2008}
wind power generation \parencite{liu2008-ietm}



\section{Forces between multipole magnet arrays}

A classical multipole or Halbach array is a linear array of magnets stacked to approximate a single magnet with sinusoidal magnetisation, first analysed in the 1970s \parencite{halbach1981,shute2000-ietm}. Multipole arrays have been analysed for a variety of force-producing applications; only a small selection are included in the bibliography here \parencite{lee2004-mx,robertson2005-ietm,rovers2009-ietm}. One objective behind such a design is to focus the magnetic field on one side of the array, such to increase the forces exerted by which magnetic field on one side of the array and to reduce or eliminate any need for magnetic shielding on the reverse side. The magnetic field produced by one such multipole array is shown in \figref{halbach} in which the single-sided nature of the magnetic field can clearly be seen.

Having expressed the forces between two magnets with arbitrary magnetisation, it becomes simple to use this expression iteratively over an array of magnets with varying magnetisation strengths or directions. The force between two arrays is simply the superposition of every combination of forces between the individual magnets in each array.

Some abstractions to the manner in which the iteration over each combination of magnets is performed allows us to simplify the code necessary to express a variety of configurations of the multiple arrays. This facilitates easy comparisons between different designs.

A multipole array can be uniquely defined in terms of several sets of variables.   The simplest such description is:
\begin{itemize}
\item Size of each magnet $[\mupmaglength,d,h]\T$,
\item Number of magnets $T$, and
\item Magnetisation direction of the first magnet $\vartheta_0$ and rotation between successive magnets $\vartheta_i$.
\end{itemize}
Other variables that can also be used to describe the array are: (assuming an array aligned with the $x$-axis)
\begin{itemize}
\item Length of the array $\muplength = \mupmaglength T$,
\item Number of magnets per wavelength $M=2\pi/\vartheta_i$,
\item Wavelength of magnetisation $\mupwavelength= \mupmaglength M$, and
\item Number of wavelengths $N=[T-1]/M$.
\end{itemize}
\figref{multipole-variables} illustrates the relationship between magnet length, array length, and wavelength for an example linear array. The wavelength of magnetisation is the length required to achieve, with successive magnets, a full rotation of magnetisation direction.

Note the presence in \figref{halbach,multipole-variables} and in general of an `end magnet' that adds symmetry to the discretisation of the magnetisation. This extra magnet is necessary to balance the forces in the horizontal direction.

Provided that enough information is specified and it is internally consistent, the Matlab implementation for calculating array forces can accept any combination of the variables listed above when defining the geometry of each array. Rather than explicitly enumerating the location of each magnet and the direction of its magnetisation, the implementation requires just an axis with which to align the array and the facing direction of its `strong' side.

\subsection{Example}

Allag et al.~\textcite{allag2009-electromotion} calculated the forces between two five-magnet multipole arrays with 90\textdegree\ rotation between successive magnets. Their results are reproduced in \figref{allag}, using the following parameters:
\begin{itemize}
\item Arrays aligned along $y$ and facing vertically $\pm z$.
\item $[m,d,h]\T = [\SI{0.01}{m},\SI{0.01}{m},\SI{0.01}{m}]\T$.
\item Total number of magnets $T = 5$ and number of magnets per wavelength of magnetisation $M=4$.
\item Displacement between arrays $\bm d=[0,\delta,\SI{0.015}{m}]\T$.
\end{itemize}
A schematic of this system is shown in \figref{allag-system}.

\begin{figure}
\centering
\asyinclude{PhD/Figures/Multipole/allag-system}
\caption{Multipole system composed of \SI{10}{mm} cube magnets for $\delta=0$. Forces in the $y$- and $z$-directions as $\delta$ varies are shown in \figref{allag}.}
\figlabel{allag-system}
\end{figure}

The Matlab code to generate \figref{allag} may be found in \code{examples/multipole\_example.m}.
An example of the structure of this code is shown below:
\begin{verbatim}
fixed_array = struct(...
  'type','linear',    ...
  'align','y',        ...
  'face','up',        ...
  'msize',  [0.01],   ... % 10cm cube magnet
  'Nmag_per_wave', 4, ... % 90 degree rotations
  'Nwaves', 1             % one wavelength of magnetisation
  );

float_array = fixed_array;
float_array.face = 'down';

yrange = linspace(-0.08,0.08,201);
zgap = repmat([0; 0; 0.015],[1 length(yrange)]);
displ = zgap + [0; 1; 0]*yrange;

forces = multipoleforces(fixed_array, float_array, displ);
\end{verbatim}
This is a good example of the convenience of using this framework for calculating results of this kind.
The bulk of the code is simply definitions for the multiple arrays.
Of the around 70 lines of code in `multipole\_example.m', only some 20 lines of code are necessary to set up the system parameters and calculate the forces; the rest of the file consists of comments, whitespace, and producing the actual figure itself.

\begin{figure}
\centering
\psfragfig{magcode/examples/fig/allag-repro}
\lofcaption
{ Reproduction of Allag et al.'s results~\textcite{allag2009-electromotion}.}
{
  The forces in the $x$-direction are zero.
}
\figlabel{allag}
\end{figure}




%%%%%%%%%%%%%%%%%

\section{Towards optimising the forces between linear Halbach arrays}
\seclabel{optim-halbach-1d}

Linear springs constructed with permanent magnets can behave in interesting ways. In levitation contexts, the natural gravity-opposing characteristic with zero power input makes permanent magnets an appealing choice for force generation (e.g., see \cite{iniguez2010-jmmm}). In the context of supporting a variable-mass load for vibration isolation, the non-linear force vs.\ displacement characteristic decreases the amount of variability in the resonance frequency of the structure, since as the mass increases and closes the gap between the magnets, the stiffness also increases \parencite{bonisoli2007-mrc}. When used in attraction, the negative stiffness can be used to decrease the resonance frequencies of a supported mass, applicable for `high-static--low-dynamic' or `quasi--zero stiffness' springs \parencite{carrella2008-jsv,robertson2009-jsv}.

With well-known closed form solutions for calculating the forces between cuboid permanent magnets of parallel magnetisation \parencite{akoun1984} and solutions for the forces with orthogonal magnetisations recently published \parencite{janssen2009-sensorletters,allag2009-sensorletters}, it is now possible to analyse a wide variety of magnet configurations that previously required semi-analytical or finite element analsis techniques. This paper investigates the force characteristics between linear multipole magnet arrays as a function of array size and magnet arrangement using cuboid-shaped magnets. The forces are calculated using the force equations derived by the above researchers.


\subsection{Linear multipole magnet arrays}

Large, flat, thin magnets can be difficult to obtain and hard to work with.
While multiple smaller magnets can be stacked together to approximate a single large magnet, greater forces can be achieved by varying the magnetisation pattern between adjacent magnets in the stack.
In the late 1970s it was discovered that magnets with sinusoidal magnetisation produced single-sided magnetic fields \parencite{halbach1980,shute2000-ietm}, although it was known much earlier for magnetic bearings that stacks of shorter ring magnets with alternating magnetisations produced greater forces than a longer single ring magnet \parencite{backers1961}.

\subsection{Geometry and magnets arrangement}

In this paper we will consider a linear stack of magnets with $\mupNmag$ magnets aligned along an horizontal axis (often referred to as a linear Halbach array); planar and volumetric stacks that have multiple magnets in the other directions will not be considered here.
As the number of magnets per wavelength of magnetisation $\mupmagperwave$ increases, the magnetisation pattern of the array more closely approximates true sinusoidal magnetisation, as shown in \figref{wavelength}.

\begin{figure}
\centering
\pregen{\asyinclude{PhD/Figures/Multipole/magperwave}}
\caption
[Three Halbach arrays of equal length.]
{Three Halbach arrays of equal length, facing up, each with a single wavelength of magnetisation and composed of $\mupmagperwave\in\{2,4,8\}$ magnets per wavelength respectively.}
\figlabel{wavelength}
\end{figure}

The magnetic flux pattern of the array is dependent also on the wavelength of magnetisation $\mupwavelength$. As the wavelength of magnetisation decreases, the total number of magnets used in the array increases, for a fixed array length $\muplength$. The relationship between wavelength, array length, and number of magnets is shown in \figref{multipole-variables}. Note the one extra magnet included in \figref{wavelength,multipole-variables} such that the total number of wavelengths \mbox{$\mupNwaves=[\muplength-\mupmaglength]/\mupwavelength$} and the total number of magnets $\mupNmag=\mupNwaves\mupmagperwave+1$. This magnet is necessary to balance the forces in the horizontal direction such that only vertical forces are generated between the arrays.

\begin{figure}
\centering
\pregen{\asyinclude{PhD/Figures/Multipole/multipole-variables}}
\caption
[Geometry of a linear Halbach array with four magnets per wavelength of magnetisation.]
{Geometry of a linear Halbach array with four magnets of length $\mupmaglength$ per wavelength of magnetisation $\mupwavelength$. This array contains two wavelengths of magnetisation with an end magnet for symmetry, i.e., $\mupNwaves=2$ and $\mupmagperwave=4$.}
\figlabel{multipole-variables}
\end{figure}

There are two independent variables to consider when choosing the parameters for a linear Halbach array of a certain size: number of magnets per wavelength $\mupmagperwave$, and total number of wavelengths~$\mupNwaves$ in the array.

\subsection{Varying magnetisation discretisation and wavelength}

Consider two linear Halbach arrays of equal size with height $\mupheight=\SI{10}{mm}$, square cross section, and length $\muplength=\SI{100}{mm}$. Their strong sides are aligned towards each other and their magnetisation pattern is such that there is a repulsive force between them. The vertical displacement between their centres is $\mupvdispl$ which can be normalised by the height of the arrays; $\mupvdispl/\mupheight=1$ corresponds to the position at which the faces of the two arrays are touching. By calculating the forces between the arrays using superposition of the forces between each permutation of magnet pairs in the two arrays \parencite{allag2009-electromotion}, the force vs.\ normalised vertical displacement was calculated for the number of magnets per wavelength $\mupmagperwave\in\{2,4,8\}$ and the number of wavelengths $\mupNwaves\in\{1,2,4\}$ and compared to the forces generated between a pair of equivalently-sized magnets of homogeneous magnetisation. These results are shown in \figref{Nwaves}.

It can be seen in \figref{Nwaves}(a) that for a small number of wavelengths, the discretisation of the magnetisation makes little difference to the force characteristic. But as the number of wavelengths increases the number of magnets per wavelength has an increasing effect. As seen most prominently in \figref{Nwaves}(c), increasing the number of magnets per wavelength $\mupmagperwave$ increases the forces over all values of displacement considered.

\begin{figure*}
\begin{wide}
\null\hspace{-1cm}%
\subfloat[$\mupNwaves=1$]{\psfragfig{magcode/examples/magspring/fig/halbach-waves-Nwaves-1}}\hfil
\subfloat[$\mupNwaves=2$]{\psfragfig{magcode/examples/magspring/fig/halbach-waves-Nwaves-2}}\hfil
\subfloat[$\mupNwaves=4$]{\psfragfig{magcode/examples/magspring/fig/halbach-waves-Nwaves-4}}
\end{wide}
\caption{Vertical force vs.\ vertical displacement normalised by the array height $\mupheight$ between two facing linear Halbach arrays with a varying number of magnets per wavelength~$\mupmagperwave$ and a varying number of wavelengths of magnetisation~$\mupNwaves$. The dashed line is the force between two single magnets of equal size to the arrays.}
\figlabel{Nwaves}
\end{figure*}

Therefore, as a general design guideline, it is only necessary to use a large number of magnets per wavelength if there is at least several wavelengths of magnetisation in total in the array. In the results shown in \figref{Nwaves}, the ratio in forces between $\mupmagperwave=2$ and $\mupmagperwave=4$ is greater than the ratio in forces between $\mupmagperwave=4$ and $\mupmagperwave=8$; most of the benefit of increasing the number of magnets is realised using four magnets per wavelength of magnetisation (i.e., 90\textdegree\ rotations between successive magnets such as shown in \figref{multipole-variables}). In cases where there are many more wavelengths of magnetisation again (as shown in \figref{Nmag-max} later), there is a greater advantage to using $\mupmagperwave=8$ over $\mupmagperwave=4$. Therefore, the greater number of wavelengths of magnetisation, the greater the force improvement in increasing the number of magnets per wavelength.

The use of multipole arrays can have a significant effect on the useful range of the force/displacement characteristic.
As the number of wavelengths increases, the magnetic field of each array becomes stronger but the magnetic field lines exhibit smaller excursions outside the magnet array before returning. Thus, the forces become stronger but over a smaller displacement, and therefore the stiffness of the magnetic spring is increased as well. For some purposes and in some cases, this can be detrimental in that it can increase the resonance frequency of the system, resulting in poorer vibration isolation properties.

\subsection{Constant number of magnets}
\seclabel{Nmag-const}

The results shown previously have in general indicated that improvements to the force characteristic are seen with a greater number of magnets. However, given a minimum magnet thickness that can be fabricated, and hence for a given array length a maximum number of magnets in total, the question arises: is it better to maximise the number of wavelengths $\mupNwaves$ or the number of magnets per wavelength $\mupmagperwave$? Consider an array of the same outer dimensions as the previous example composed of magnets each of length $\mupmaglength=\SI{2}{mm}$ and of cross-sectional area \SI{10x10}{mm}, such that there are \num{50} magnets in the array. The force characteristic for this system, again with $\mupmagperwave\in\{2,4,8\}$, is shown in \figref{Nmag-max}. In this extreme example with large $\mupNwaves$, the strong region of the field is close to the surfaces of the arrays and there is considerable difference in the curves for each value of $\mupmagperwave$; maximising $\mupmagperwave$ produces stronger results providing there are sufficiently many wavelengths of magnetisation along the length of the array. When $\mupNwaves$ is small (say $\mupNwaves<5$) for a fixed magnet size, these general results do not hold and the design possibilities must be evaluated on a case-by-case basis.

\begin{figure}
\centering
\pregen{\psfragfig{magcode/examples/magspring/fig/halbach-max-Nmag}}
\caption
[Force characteristic with arrays each composed of fifty magnets.]
{Force characteristic with arrays each composed of fifty magnets of length $\mupmaglength=\SI{2}{mm}$, over a variety of number of magnets per wavelength~$\mupmagperwave$. The dashed line is the force between two homogeneous magnets of length \SI{100}{mm}.}
\figlabel{Nmag-max}
\end{figure}

\subsection{Non-equal magnet sizes}

While the force characteristic of an eight-magnet wavelength ($\mupmagperwave=8$) array can outperform the four-magnet ($\mupmagperwave=4$) array, the latter can be improved in some cases by adjusting the relative sizes of the magnets in the array.
Consider the four-magnet array shown in \figref{magratio} in which the horizontally-polarised magnets of length $b$ are smaller than the vertically-polarised magnets of length $a$.
Magnet size ratio $\mupqratio=b/a$ is the measure used here to compare different array configurations, for which $\mupqratio=0$ corresponds to an array composed only of vertically-oriented magnets, and $\mupqratio=1$ corresponds to equally-sized magnets of both horizontal and vertical magnetisations (as considered previously in this paper).

\begin{figure}
\centering
\pregen{\asyinclude{PhD/Figures/Multipole/magratio}}
\lofcaption{Schematic of a four-magnet Halbach array with variable magnet sizes.}{ The number of magnets per wavelength $\mupmagperwave=4$ for all arrays of this type except in the degenerate case of $b=0$, hence $\mupmagperwave=2$.}
\figlabel{magratio}
\end{figure}

\Figref{ratios-compare} compares the force characteristic with a variety of magnet size ratios for arrays composed of nine magnets (i.e., two wavelengths of magnetisation with a symmetry magnet), of length $\muplength=\SI{100}{mm}$, and of cross-sectional area \SI{10x10}{mm}.
As expected from the previous results, $\mupqratio=0$ results in smaller forces than for $\mupqratio=1$; however, $\mupqratio=0.5$ results in slightly greater forces again: an increase of 5\% at a displacement of approximately $\mupvdispl=1.3\mupheight$, tapering off as the displacement increases.
(This value of $\mupqratio$ is close to optimum for this system; see \figref{ratios-forcesum}.)
This result can be justified intuitively with the recognition that there is a stronger vertical force between opposing vertically-polarised magnets than between horizontally-polarised magnets; dedicating a greater proportion of the magnet volume to the vertical magnets yields an increase in the total force.

\begin{figure}
\begin{wide}
\begin{subfigure}
\pregen{\psfragfig{magcode/examples/magspring/fig/ratios-compare}}
\caption{Force--displacement characteristic between arrays with $\mupNwaves=2$.}
\figlabel{ratios-compare}
\end{subfigure}\hfil
\begin{subfigure}
\pregen{\psfragfig{magcode/examples/magspring/fig/ratios-forcesum}}
\caption{Integral of the force--displacement characteristic vs.\ magnet length ratio $\mupqratio$ of two modified Halbach arrays over a displacement range of \SIrange{10}{20}{mm}, shown with varying number of wavelengths of magnetisation $\mupNwaves$.}
\figlabel{ratios-forcesum}
\end{subfigure}
\end{wide}
\caption
  [Considering the modified Halbach array.]
  {
    Considering the influence of the magnet length ratio $\mupqratio$ on the force characteristics of two modified Halbach array in opposition; each has size \SI{100x10x10}{mm}.
  }
\end{figure}

However, as the number of wavelengths of magnetisation~$\mupNwaves$ increases, there is a decrease in the improvement offered by reducing the size of the horizontal magnets.
This can be quantified by comparing the integral of force over the displacement range of interest for a variety of magnet length ratios~$\mupqratio$.
In \figref{ratios-forcesum}, such results are shown (for the same arrays discussed previously) comparing the relative difference of the force--displacement integral as a function of the magnet length ratio, normalised by the integral results for $\mupqratio=1$.
Since the force improvement with adjusting $\mupqratio$ is only significant for low numbers of wavelength of magnetisation, this technique is only suitable for increasing the forces when a small total number of magnets are to be used, perhaps for ease of construction of the magnet array. Otherwise, it is more efficient simply to increase the number of magnets than to change the magnet size ratio.

In conclusion, in optimising the forces between linear Halbach magnet arrays, it has been shown that there is a relationship on the force vs.\ displacement characteristic from both the wavelength of magnetisation and the number of magnets in the array.
As the wavelength of magnetisation decreases while keeping the array length constant, the effect of increasing the number of magnets per wavelength increases. In order to achieve significantly larger forces over homogeneous magnetisation, a large number of magnets should be used.
When only a small number of magnets are used, small improvements to the forces can be achieved by using magnets of smaller volume  which are magnetised parallel to the array length and magnets of larger volume which are polarised in the facing direction.

There is still scope for further analysis of the force behaviour between multipole arrays of varying height-to-width (and perhaps height-to-wavelength) aspect ratios.


\section{Planar multipole arrays}
\seclabel{planar-multipole}

In \secref{optim-halbach-1d}, linear multipole arrays were considered in some detail for increasing the force for magnetic springs.
The term `linear' is used to indicate that magnetisation is varying as a function of position in a single direction.
Using the magnet theory covered in \secref{magforce-arbitary}, it is also possible to calculate the forces between magnet arrays with magnetisation as a function of position in two directions.
For two multipole arrays of the structure shown in \figref{trumper-system} that have magnetisation directions based on the superposition of orthogonal linear multipole arrays, results are shown in \figref{trumper} for horizontal displacement with arrays composed of \SI{10}{mm} cube magnets and \SI{15}{mm} vertical displacement between the array centres.
Each magnet of each array (except those with zero magnetisation) has a magnetisation of \SI{1}{T}.

Note the differences in the shape of the force curves between \figref{allag,trumper}; in the planar multipole arrangement, the vertical force is largely positive even as the arrays shift into their attractive zone, whereas the linear multipole forces are more symmetrical and become significantly negative under a similar displacement.

Planar multipole arrays consist of a two dimensional stack of magnets that vary in magnetisation as a function of their position.
\textcite[Appendix~A]{kim1997-thesis} has proposed a planar multipole array based on the magnetisation of two superimposed linear multipole arrays.
Such a system, called here a `planar Halbach' array, is shown in \figref{trumper-system}, with five magnets per side and 90\textdegree\ magnetisation rotation in both the $x$--$z$ and $y$--$z$ planes between successive magnets.

\begin{figure}
\centering
\includegraphics{PhD/Figures/Multipole/pa-trumper}
\lofcaption{
  A planar Halbach array, facing up, with magnetisation directions as the superposition of two orthogonal linear Halbach arrays.
}{
  Non-filled arrowheads denote diagonal magnetisation and empty magnets have zero magnetisation.
}
\figlabel{trumper-system}
\end{figure}


\textcite{moser2002-maglev}, \textcite{rovers2009-ietm}, and \textcite{janssen2009-jsdd} (the latter two with associated publications) have examined the idea of a `quasi-Halbach' planar multipole array in which all magnetisation directions are restricted to one of the orthogonal directions of the axes (i.e., no diagonal magnetisations).
Another planar multipole array, simpler again, is the `patchwork' array, which alternates between positive and negative vertical magnetisation between successive magnets in both directions.
See Hinds cited by \textcite{kim1997-thesis}, or Chitayat cited by \textcite{cho2001} for examples use for the patchwork array in other circumstances.

The patchwork and quasi-Halbach arrays are shown respectively in \figref{two-planar-arrays}.

Analysis of the magnetic flux produced by various planar arrays has been done by \textcite{cho2001}, culminating with a design using triangular magnets for the `return path' within the array.


\begin{figure}
\centering
\subfloat[Patchwork array.]{\quad\includegraphics{PhD/Figures/Multipole/patchwork}\quad}\hfil
\subfloat[Quasi-Halbach array.]{\quad\includegraphics{PhD/Figures/Multipole/quasi-halbach}\quad}
\caption[Two planar multipole array designs.]{Two planar multipole array designs, facing `towards the reader'. Note the (unfilled) areas of zero magnetisation in the quasi-Halbach array.}
\figlabel{two-planar-arrays}
\end{figure}

\subsection{Example of planar Halbach array forces}

Force characteristics for the quasi-Halbach array have been shown recently \cite{janssen2009-jsdd} but the planar Halbach array has not yet been analysed.
Since the planar Halbach array uses magnetisations in directions non-orthogonal to the axes, the necessary calculations are more complex than for the quasi-Halbach array.
For two facing planar Halbach arrays, \figref{trumper} shows results of $y$- and $z$-force vs.\ horizontal $y$-displacement with arrays composed of \SI{10}{mm} cube magnets and \SI{15}{mm} vertical displacement between the array centres.
Each magnet of each array (except those with zero magnetisation) has a magnetisation of \SI{1}{T}.

\begin{figure}
\centering
\psfragfig{magcode/examples/fig/planar-halbach}
\caption
[Force vs.\ horizontal displacement results for two planar Halbach arrays.]
{Force vs.\ horizontal displacement results for two planar Halbach arrays such as shown in \figref{trumper-system}. The $x$-forces are all zero.}
\figlabel{trumper}
\end{figure}

Note the differences in the shape of the force curves between \figref{allag,trumper} for linear and planar arrays respectively; in the planar Halbach case, the vertical force is largely positive even as the arrays shift into their attractive zone, whereas the linear multipole forces are more symmetrical and become significantly negative under a similar displacement.
A more detailed comparison between various configurations of Halbach arrays is currently under investigation and will be reported at a later date.

\subsection{Example comparion between planar arrays}

When pairs of arrays are faced in opposition, a vertical force is produced between them that can be larger than the corresponding force between two equivalently-sized magnets with homogeneous magnetisation.
Each array configuration has a different magnetic field pattern and has a different force/displacement profile.
It is now possible to evaluate between and optimise the array configurations based on the design requirements for which they are required.

The vertical force vs.\ vertical displacement characteristics of each array discussed (linear Halbach, planar Halbach, patchwork, and quasi-Halbach) are compared in \figref{planar-compare}, with the forces between two single magnets (of the same size as the arrays) included for comparison.
The linear Halbach, planar Halbach, and quasi-Halbach have all been chosen to have a single wavelength of magnetisation with an end magnet for symmetry.
Each array has the same outer dimensions of $\SI{50x50}{mm}$, thickness \SI{10}{mm}, and composed of magnets with magnetisation \SI{1}{T}, and each magnet is either cube-shaped or, for the linear array, has a square cross-section..

It is interesting that the linear array exhibits the greatest force for a given displacement; this can be explained by the fact that the planar array and the quasi-Halbach array both have regions of zero magnetisation; this degrades their load-bearing ability since there is less inherent magnetic energy in each.
These results indicate that the linear array is the most suitable choice for bearing vertical loads; not only are the forces stronger, but the magnetisation arrangement (and hence construction of the array) is simpler as well.
It is also notable that despite the much simpler magnetisation pattern of the quasi-Halbach array compared to the planar Halbach array, the results for these two are quite similar, especially at small displacements.
However, it must be noted that these differ from the experimental results of \textcite{moser2002-maglev}.
This highlights the need to study these systems in more detail outside of the realm of theoretical analysis.

\begin{figure}
\centering
\psfragfig{magcode/examples/fig/planar-compare}
\lofcaption{Vertical forces vs. vertical displacement between the array centres to compare the load-bearing ability of a range of magnet arrays.}{ The dashed vertical line indicates the displacement at which the array faces are in contact.}
\figlabel{planar-compare}
\end{figure}

\section{Multipole conclusions}

This self-contained chapter contains work outlining the diverse field of multipole magnetic arrangements and formalises the theory for calculating forces between multipole arrays using cuboid magnets.

Analysis is performed on linear and planar `Halbach arrays' for assessing their potential for increasing the load-bearing capacity of a magnetic spring.
The parameters for designing the multipole arrays are critical in achieving useful improvements here, and there are certain caveats with using such designs.
Primarily, it must be noted that multipole designs will be far more sensitive to lateral displacements, leading to instability far more easily than for homogeneous magnets.
Multipole arrays are best used for devices with restricted degrees of freedom or great control authority for stabilising the inherent instabilities in the device.

\end{document}















