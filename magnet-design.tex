%!TEX root = thesis.tex
\chapter{Magnetic springs}

\chapterprecis{
  This chapter uses the theory presented earlier to discuss simple
  permanent magnetic systems and how they can be used in spring-like fashions.
  First cover various arrangements that produce forces in one direction or
  another, keeping track of where the stabilities and instabilities are in the
  translational degrees of freedom. This is followed by a discussion on
  rotational stability; this is more of a design problem as geometric placement
  of the magnets has more influence.
  In the second half of the chapter I digress on forces between a magnet and a coil;
  this has relevance to the later experimental rig design and demonstrates an
  application of the theory outlined in \chapref{magnet-theory}.
}

\epigraph{As the weaver elaborated his pattern for no end but the
pleasure of his aesthetic sense, so might a man live his life, or if one
was forced to believe that his actions were outside his choosing, so might
a man look at his life, that it made a pattern. There was as little need
to do this as there was use. It was merely something he did for his own
pleasure.}{\textcite{maugham1915}}

\section{Introduction}

The force created between permanent magnets can be used in various ways for supporting load.
This chapter investigates a number of different configurations, some of which having been used to various degrees in the literature.
Varieties in design lend themselves for different purposes, such as optimising for load force, number of directions of instability, and low variability in resonance frequency.


\section{Simple magnet arrangements}

\begin{figure}
  \grf{Figures/Magnets/vspring}
  \caption{Magnets in repulsion create a vertical spring.}
  \figlabel{vspring}
\end{figure}

The most simple example of a magnetic spring can be seen in
\figref{vspring}, with one fixed and one floating magnet arranged
vertically.  With like poles facing, the two magnets repel each other
and produce an air gap between them. Displacement towards each other
is restored by the repulsive magnetic force, and displacement away is
restored by gravity. The floating magnet must be constrained in both
horizontal directions by the shaft. If the contraint is removed, it
will be naturally unstable horizontally due to Earnshaw's theorem (see
\secref{earnshaw}).

A more stable configuration is desired, because the instabilities of
this spring occur in two orthogonal horizontal directions. Inspired by
the rearrangements of radial and thrust bearings shown by
\textcite{yonnet1981}, an improved design is shown in
\figref{hspring}. Now the spring forces are caused by horizontal
magnets in \emph{attraction}, in contrast to the earlier arrangement
shown in \figref{vspring} which uses repulsive force.) Two fixed
outer magnets both attract a centred floating magnet, so the unstable
\dof/ is in that horizontal direction. Perturbations in
the other horizontal direction are restored by the aforementioned
attraction, which is similarly the cause of the positive vertical
spring stiffness. Note that the diagram works as both a top \emph{and}
side view, demonstrating how it is unstable in only one direction.

\begin{figure}
  \begin{subfigure}
    \grf{Figures/Magnets/hspringa}
    \caption{At rest, neglecting the magnet weight.}
    \figlabel{hspringa}
  \end{subfigure}
  \begin{subfigure}
    \grf{Figures/Magnets/hspringb}
    \caption{After displacement.}
    \figlabel{hspringb}
  \end{subfigure}
  \caption[`Horizontal' spring.]{A `horizontal' spring with \emph{attracting}
magnets to create vertical stiffness, as shown by the reaction forces after
displacement.}
  \figlabel{hspring}
\end{figure}

The removal of an unstable \dof/ has its consequences,
however.  The forces between magnetic dipoles are inverse-square
functions of the distance between them, and this holds true
approximately for magnets as well. In the vertical spring, the effect
of increased load on the spring is displacement toward the fixed
magnet. This increases the stiffness of the spring.

With the horizontal spring, however, the behaviour is a little more
complex. For the case shown in \figref{hspringa}, the only forces
on the floating magnet are horizontal. The vertical spring force
occurs when the magnet has been displaced as in \figref{hspringb},
which will increase with distance only for a small range. Beyond this,
the force will start \emph{decreasing} as the floating magnet becomes
further enough away from the fixed magnets â€” at which point the spring
stiffness turns negative and the floating magnet will be unstable.

This parabola effect is shown in \figref{h+v-forces-v}, which also
includes the force curve of the vertical spring. The graph was
produced from a finite element analysis performed by \ANSYS/, using
half-inch neodymium rare-earth cube magnets.
\note{Remanence $B_r=\SI{1.2}{T}$ and coercivity
  $H_c\approx\SI{900}{kA\cdot m^{-1}}$}
The effect of varying the gap between the fixed and floating magnets for the
horizontal spring is also demonstrated; the further away the fixed magnets
are, the weaker the forces are.

\begin{figure}
  \begin{wide}
    \raggedout
    \grf{Figures/Magnets/h+v-forces-v}
    \hfill
    \grf{Figures/Magnets/h+v-springs}
    \hfill
    \null
  \end{wide}
  \caption[Spring forces of the vertical \& horizontal springs.]{Forces from
\FEA\ comparing the simple vertical and horizontal magnetic springs.
The initial gap between the magnets in the vertical spring has been arbitrarily
set to three magnet widths.}
  \figlabel{h+v-forces-v}
\end{figure}

\Figref{hvspring} shows how the two springs discussed so far,
horizontal and vertical, may be combined to reap the benefits of
both. There are now three fixed magnets: one below, which provides the
majority of the stiffness of the spring, and two aside, for
stabilising one \dof/ in the `into the page'
direction. This simple design gives a basic framework from which to
build up more complex arrangements.

\begin{figure}
   \grf{Figures/Magnets/hvspring}
   \caption[Combination vertical/horizontal spring.]{Combination
spring, with the
strength of the vertical spring and the stability of the horizontal spring.}
   \figlabel{hvspring}
\end{figure}


\section{Taxonomy of magnetic springs}

In this section we introduce a variety of \emph{simple} magnetic
springs, with the mind to analyse their behaviour. It is implicit in
Earnshaw's theorem \cite{earnshaw1842} (elucidated by Tonks
\cite{tonks1940}) that all permanent magnet suspensions cannot be
stable, so the one of the factors involved in analysing the efficacy
of a magnetic spring is its degree of stability.

Earnshaw established the relation for purely magnetic systems
\begin{dmath*} k_x+k_y+k_z=0; \end{dmath*}
that is, the translatory stiffesses in each direction sum to
zero. (Define the vertical in the $z$ direction.) Introducing soft
iron into the system changes the relation to summing to \emph{less
  than} zero, reducing the stability of the system.

Various systems can be created with different arrangements of magnets
and combinations thereof. Seven spring configurations are examined here:
\begin{itemize}
\item Unstable vertical ($k_z<0,k_x=k_y=-\half k_z>0$)
\item Stable vertical ($k_z>0,k_x=k_y=-\half k_z<0$)
\item Vertical double stable ($k_z>0,k_x>0,k_y<0$)
\item Quasi--zero stiffness ($k_x=k_y=k_z=0$)
\item Horizontal ($k_x<0,k_y=k_z=-\half k_x>0$)
\item Vertical zero stiffness ($k_z=0,k_y=-k_x>0$)
\end{itemize}
These springs are detailed as follows.

The most common magnetic suspension for demonstrating nonlinear
control design is the unstable vertical arrangement, in which a fixed
upper magnets applies a gravity-cancelling force on a lower magnet in
attraction. This design is unstable and thus has a negative
stiffness. Although it is unstable in only a single \dof/,
it is inconvenient to bear loads with a negative stiffness spring.

The opposite of the unstable vertical spring is the stable vertical
spring, consisting of a fixed lower magnet supporting a floating upper
magnet in repulsion. Here, there is a positive spring stiffness in the
vertical, load bearing direction. However, it experiences multiple
degrees of instability in the horizontal directions, which complicates
its stabilisation.

Using two fixed lower magnets, slightly offset, instead of one in the
vertical stable configuration produces a `double stable' spring with a
limited range of stability also in the direction of separation between
the fixed magnets. Much smaller forces are possible with this setup.

A very interesting system is produced when the two vertical springs
are combined; this is termed the zero stiffness spring. With a
positive vertical stiffness in series with a negative stiffness, the
local minimum in the force/displacement curve creates a marginally
stable point of zero stiffness. With greater displacements, the upper
attractive magnet can be used to simply \emph{reduce} the natural
frequency of the system without driving it to zero; this improves
vibration isolation characteristics without altering the stability of
the system (given bounded displacements). This is the configuration
used by \textcite{challa2008} in their tunable vibration energy
harvesting device.

Stability in the vertical direction with only a single degree of
instability can be achieved with a horizontal arrangement of magnets
in attraction. Here, the load bearing force is mirrored in one
horizontal direction, although the forces involved are smaller than
with the vertical arrangements.

This horizontal spring can be augmented with the stable vertical
spring in order to increase its load bearing capacity. This does not
compromise the stability achieved in the out of plane horizontal
direction.

Finally, the horizontal and zero stiffness springs can produce a
spring approaching zero stiffness in the vertical direction, a small positive
stiffness in one horizontal direction, and an equal negative stiffness
in the other.

\subsection{Other magnet arrangements}

This covers only a small selection of possible permanent magnet
configurations, but it does highlight the important variations in
behaviour possible. To enumerate the different cases, we have:
\begin{enumerate}
\item positive stiffness in two horizontal directions;
\item negative stiffness in two horizontal directions;
\item zero stiffness in all directions;
\item negative stiffness in one horizontal direction; and,
\item zero stiffness in one direction;
\end{enumerate}

\textcite{choi2003} designed a levitation table capable of supporting \SI{15}{kg} that is unstable in only one horizontal \dof/.
However, the magnetic arrangement used for the spring, despite their claims, appears quite unstable and is not suited for scaling up to bear greater loads.
Their experiments prove that only a single axis requires control for stability, but the position resolution they achieve is fairly coarse.

\section{Analyses of magnetic springs}

Magnetic node tests of a simple zero stiffness
spring~\cite{nijsse2001}, depicted in
\figref{zero-stiffness-spring}, with three half-inch cube magnets
gives expected results for vertical load bearing, shown in
\figref{zspring-vary-gap}. The displacement is shown over the full
range of vertical gap. The spring is marginally stable in both
horizontal directions, however, which is less convenient.
\begin{figure}
  \centering
  \grf{Figures/Systems/zero-stiffness-spring}
  \caption{`Zero stiffness' spring schematic.}
  \figlabel{zero-stiffness-spring}
\end{figure}

\begin{figure}
  \centering
  \grf{Simulations/Single_magnets/z_spring/eps/zspring-vary-gap}
  \caption{`Zero stiffness' spring forces \vs\ vertical displacement}
  \figlabel{zspring-vary-gap}
\end{figure}

\begin{figure}
  \centering
  \grf{Simulations/Single_magnets/z_spring/eps/zspring-2d-yforces}
  \grf{Simulations/Single_magnets/z_spring/eps/zspring-2d-zforces}
  \caption{`Zero stiffness' spring forces \vs\ displacement in two orthogonal directions}
  \figlabel{zspring-forces}
\end{figure}



Well, the logical next step after analysing the zero stiffness spring
is to combine it with my previous spring, the combined
horizontal/vertical spring with a single degree of translational
instability. This is shown in \figref{zhv-spring}.

\begin{figure}
   \centering
   \grf{Figures/Systems/zhv-spring}
   \caption{Co-ordinate system of the `ZHV' spring. The \y\ direction is into the page.}
   \figlabel{zhv-spring}
\end{figure}

These tests are more sophisticated that the zero-stiffness tests,
because the effect of load on the spring was neglected in the previous
case. For these following tests, there are five Newtons of force
applied by gravity, which has the effect of removing the symmetry for
some of the graphs. There is a single magnet dimension gap between the
spring magnet and all fixed magnets.

The first three tests are shown in
\figref{zhvspring-move-x,zhvspring-move-y,zhvspring-move-z} for motion
around the centred position in the three orthogonal directions. As
expected, this spring combines the properties of both simpler springs
used to create it. Zero stiffness can be achieved at a point of
marginal stability. This hasn't changed, although the graph is more
realistic since it assumes a non-zero load on the spring.

It can also be seen that horizontal motions in both directions reduce
the vertical force on the spring. This means that for disturbances in
these horizontal directions, there will be coupling with the vertical
direction.

\begin{figure}
   \centering
   \grf{Simulations/Single_magnets/5_magnet_spring/eps/zhvspring-move-x}
   \caption{Forces on the ZHV spring for displacement in the \x\ direction.}
   \figlabel{zhvspring-move-x}
\end{figure}

\begin{figure}
   \centering
   \grf{Simulations/Single_magnets/5_magnet_spring/eps/zhvspring-move-y}
   \caption{Forces on the ZHV spring for displacement in the \y\ direction.}
   \figlabel{zhvspring-move-y}
\end{figure}

\begin{figure}
   \centering
   \grf{Simulations/Single_magnets/5_magnet_spring/eps/zhvspring-move-z}
   \caption{Individual and combined vertical forces on the ZHV spring for
   displacement in the \z\ direction. For this case of $\x=\y=0$, all
   horizontal forces are zero.}
   \figlabel{zhvspring-move-z}
\end{figure}

Moving the spring in two directions simultaneously gives a better
picture of the stability of the spring. For example, motion in the
\x-direction showns zero force in the \y, and vice versa. But motion
in both? The behaviour is more complex than shown here.

However, marginal stability in the vertical direction is the same
behaviour as a spring magnet levitating below a fixed attractive
magnet, which I rejected because I like vertical stability. So there
needs to not be a contradiction in my choices here. I expect that I
will use a vertically attracting magnet to simply \emph{reduce} the
effective mass of the spring, rather than bring it all the way down to
the zero stiffness state. This can be experimented with.

\section{Isosurfaces of stability}
\seclabel{all-springs-forces}

I have managed to plot the three dimensional forces and stiffness of
the zero-stiffness \x-unstable spring in three dimensional space. This
will be useful in comparing the stability characteristics between
different spring configurations. While relatively simple now, these
plots will look a more complex when multipole arrays are used to
generate the magnetic forces. See \figref{zhvspring-move-z-iso}.

\begin{figure}
   \centering
   \grf{Simulations/Single_magnets/5_magnet_spring/eps/zhv-xforces}
   \caption{\x-direction isoforces on the ZHV spring.}
   \figlabel{zhvspring-move-z-iso}
\end{figure}

Using these \threeD/ forces over a range of \threeD/ displacements, I have
also plotted force and stiffness isosurfaces (\ie, surfaces of constant
force/stiffness), using transparency to see what is going on.

Having now created a method to plot three dimensional results, I then combined
all of the code for examining the forces on each of my simple single magnet
springs. Since the method is simply the superposition of forces for various
arrangements of magnets, the individual results can be broken out and examined
separately.

\subsubsection{Vertically attracting spring}

We start out by looking at the simple configuration often used in the
literature: the spring magnet floating beneath a fixed attractive support
magnet. This spring is stable in both horizontal directions, but unstable in
the vertical direction.

First examine the forces on the floating spring as locations beneath the
support, shown in \figref{vattr-forces}. No legend makes this a bit confusing,
but the colour scale goes through the spectrum red to blue as the forces
increase. For symmetrical cases like the \x- and \y-direction forces, this
makes pale green-blue the colour of zero force, with orange/purple the
negative and positive extremes, respectively.

So, in the case of the \x-forces, we see that positive motion in the
x-direction results in a force in the negative direction; \ie, the force
opposes the displacement. Similarly for the \y-direction. As is expected, in
the \z-direction, we see that the closer the spring magnet comes to the
attractive magnet vertically, the greater the forces in that direction. This
is instability.

\newcommand\isoforces[2]{%
  \begin{figure}
    \begin{wide}
      \centering
      \grf{Simulations/Single_magnets/all_springs/eps_nice/#1-xforce}
      \grf{Simulations/Single_magnets/all_springs/eps_nice/#1-yforce}
      \grf{Simulations/Single_magnets/all_springs/eps_nice/#1-zforce}
    \end{wide}
    \caption{#2}
    \figlabel{#1-forces}
  \end{figure}
}
\newcommand\isostiffnesses[2]{%
  \begin{figure}
    \begin{wide}
      \centering
      \grf{Simulations/Single_magnets/all_springs/eps_nice/#1-xstiffness}
      \grf{Simulations/Single_magnets/all_springs/eps_nice/#1-ystiffness}
      \grf{Simulations/Single_magnets/all_springs/eps_nice/#1-zstiffness}
    \end{wide}
    \caption{#2}
    \figlabel{#1-stiffnesses}
  \end{figure}
}

\isoforces{vattr}{Isosurface forces of the attracting vertical spring}

The stability regions are shown more clearly in the stiffness plots. We know
that instability occurs in regions of positive gradient of the force curve.
This is negative stiffness: the resulting force does not oppose the
displacement that causes it. For the stiffness isosurfaces, \emph{only}
regions of negative stiffness are shown, beginning with red at the region of
zero stiffness, the region of marginal stability. Let's have a look at
\figref{vattr-stiffnesses}.

\isostiffnesses{vattr}
  {Negative isosurface stiffnesses of the attracting vertical spring.}

We see that in both horizontal directions, there is a wide region of stability
shown by the absence of negative isosurfaces. In the vertical direction, we
see that the stiffness is negative for all reasonable locations of the spring.

With this simple spring, we have shown the force and stiffness isosurfaces.
From these curves, we can easily deduce the regions of stability through the
negative stiffness isosurfaces.

\subsubsection{Vertically repelling spring}

While time is pressing, I'll now simply enumerate through the graphs produced
with minimal explanation. Look to the future for more description.

The simple positive vertical-stiffness spring is covered next. Here we have
the opposite of the vertically attracting spring: the spring magnet is
supported \emph{above} a fixed magnet in repulsion. Here we have vertical
stability only, with both horizontal directions marginally stable in the
centred position. See \figref{vrepl-stiffnesses}.

\isostiffnesses{vrepl}
  {Negative isosurface stiffnesses of the repelling vertical spring.}

\subsubsection{Zero stiffness spring}

The zero stiffness spring was a new development. It is a superposition of the
previous two springs, so we have a vertically attractive magnet above our
spring magnet, and a vertically repulsive magnet below. Now, half way in
between their effects will cancel out, producing equal force up and down on
the magnet. If the magnet is supporting load, this creates a `zero stiffness'
configuration below the centre point where, theoretically, the spring forces
is de-coupled from its displacement. Now, the spring is unstable above this
point, so it would require a stabilising control system to work in practise,
but it's an interesting idea.

\isostiffnesses{z}
  {Negative isosurface stiffnesses of the zero stiffness spring.}

\subsubsection{Horizontal spring}

The horizontal spring is composed of two fixed magnets supporting the spring
magnet between them in the \x-direction in attraction. The stability is in
both \y- and \z-direction, instability in \x.

\isostiffnesses{h}
  {Negative isosurface stiffnesses of the horizontal spring.}

\subsubsection{Horizontal spring with vertical support}

Due to the previous spring's lack of significant loading bearing ability, it
can be bolstered by adding a vertically repulsive magnet below the spring
magnet. This is a superposition of the horizontal, and vertically repulsive
springs. We should see similar stability curves to the horizontal spring
without support.

\isostiffnesses{hv}
  {Negative isosurface stiffnesses of the horizontal spring with support.}

\subsubsection{Horizontal spring with zero stiffness}

Okay, if zero stiffness is so good then we may as well use it in combination
with the horizontal spring to provide greater horizontal stability. This is
the culmination of each design, and theoretically provides the advantages of
each design before it: the reduced resonance of the zero stiffness spring, the
large loading bearing support, and the one direction of instability that makes
it easier to control. We'll see how it works out in the experiments\dots.

\isostiffnesses{zhv}
  {Negative isosurface stiffnesses of the zero stiffness horizontal spring.}


\subsubsection{Single-instability spring}

\cite{choi2003}. \fxfatal{missing}



\section{Rotational degrees of freedom}

It becomes more difficult to examine the behaviour of these systems in
six degrees of freedom. There is no ``Earnshaw's Theorem'' to neatly
relate the rotational stiffnesses. Equilibria of a system with that
have rotational instabilities can be stabilised by coupling together
identical systems. An example is the vertically stable spring, which
is unstable around the $x$, $y$ directions. A trio of these springs
connected rigidly is now \emph{stable} in these rotational directions.

Such conveniences make it possible to design a system with a single
degree of instability. An axial bearing designed in such a manner has
been presented by some people [citation]. Here, a non-contact magnetic
spring is designed with similar principles.

The augmented horizontal spring is used as a basis, as the least
unstable spring presented thus far with a positive vertical
stiffness. For point load support, this spring is unstable both in the
$y$-direction and around the $x$-direction. For planar load support,
with a coupled set of these springs, the instability is now in $y$-direction
(as before) and around the $z$-direction (in contrast). The
method of eliminating one of these rotational instabilities involves
adding supplementary weak magnets that apply small translational
forces to the structure with large `lever arms' (orthogonal distance
to the centre of rotation), such that the added translation stiffness
is negligible but the added rotational stiffness is significant and
stabilising.


\section{Rotationally stable spring}

Previously I have shown a variety of magnetic springs with various
amounts of instability. With rotation degrees of freedom more pliable
in their stability properties it is interesting to attempt to produce
a `minimally unstable' magnetic spring. It is possible to produce a
magnetic arrangement that is stable in all three rotational degrees of
freedom and unstable in but a single translational \dof/.

Unlike `Earnshaw's theorem', which is unequivocal about the
translational stabilities of a magnetic arrangement, no conclusive
statements can be made about a magnetic system's \emph{rotational}
stabilities. This is due to the intrinsic coupling between moment and
geometry; as shown below, it is possible to exploit geometry to
stabilise a magnetic system in all rotational degrees of freedom.

The main idea is that a magnetic system can be
stabilised in all but one translational direction, and
supplementary magnets with carefully chosen `lever arms' can be added to the design to stabilise the
rotation directions.

\textcite{delamare1994} performed something similar to remove the
rotational instability of a radial magnetic bearing by adding a
weaker, \emph{axial} bearing to the systemâ€”\ie, opposite in effect
to the main aims of the system. The coupling of the axial and radial
bearings eliminates the rotational instability, but the strength of
the radial bearing bearing overpowers the axial bearing for normal
operation.

This is more easily explained with a
diagram. \Figref{delamare} shows how this idea can be applied to a
simplified model.
Attracting magnets close to the centre of rotation
provide the forces for the spring (refer to
\figref{hspring}). Further away, \emph{repelling} magnets are
placed such that the translational forces they apply are \emph{less}
than the attractive forces of the inner magnets (see
\figref{delamare-forces}). However. their strengths and distances
away have been carefully chosen so that the \emph{rotational} forces
(moments) they apply are \emph{greater} than the moments applied by
the inner magnets (see \figref{delamare-moments}). The system my be
represented by the following equations for each equal and opposite
magnet pair. For the forces:
\begin{dgroup}
\begin{dmath}
  F_{\text{total}} = F_{\text{inner}} - F_{\text{outer}}
\end{dmath},
\begin{dmath}
  F_{\text{inner}} > F_{\text{outer}}  \condition{because $d  > D$}
\end{dmath},
\intertext{therefore,}
\begin{dmath}
  F_{\text{total}} > 0
\end{dmath}.
\end{dgroup}
And for the moments:
\begin{dgroup}
\begin{dmath}
  M_{\text{total}} = - M_{\text{inner}} + M_{\text{outer}}
\end{dmath},
\begin{dmath}
  M_{\text{total}} = - r F_{\text{inner}} + R F_{\text{outer}}
\end{dmath},
\begin{dmath}
  R\cdot F_{\text{outer}} >  r\cdot F_{\text{inner}}
  \condition{for $M_{\text{total}} > 0$}
\end{dmath},
\intertext{therefore,}
\begin{dmath}
  \frac Rr > \frac{F_{\text{inner}}}{F_{\text{outer}}}
\end{dmath}.
\end{dgroup}
With appropriate choices of $d$, $D$, $r$, and~$R$, this condition may
be satisfied. Bear in mind, of course, that to first order $F \propto 1/d^2$,
so the
ratio between $r$~and $R$ will need to be significantly greater than
that between $d$~and $D$.

\begin{figure}
  \begin{subfigure}
    \grf{Figures/Bearings/delamare-forces}
    \caption{
     The added magnets are spaced farther away,
     so they do not affect the
     translational stability.
     \figlabel{delamare-forces}}
  \end{subfigure}
  \begin{subfigure}
    \grf{Figures/Bearings/delamare-moments}
    \caption{
      The added magnets \emph{do} affect the radial stability
      because their distance from the centre of rotation is much greater.
      \figlabel{delamare-moments}}
  \end{subfigure}
  \caption{Secondary (outer) magnets may be added to add stability
      in the rotational direction.}
  \figlabel{delamare}
\end{figure}

A magnet spring can be designed along such principles such as shown in
approximation in \figref{example-8-mag-spring}, which shows a top-down view.

\begin{figure}
  \asyinclude{PhD/Figures/Systems/magrotate.asy}
  \caption{Schematic of a single unstable \dof/ concept.}
  \figlabel{example-8-mag-spring}
\end{figure}

The translational stability of the system can be assessed using the theory between parallel cuboid magnets (crossref).
In order to model the rotational stability, a measure must be calculated of the torque on the spring design due to rotations around each axis.
Forces in three directions can only be calculated for parallel magnets, and while there are expressions in the literature to calculate the torques between cuboid magnets \cite{janssen2010-ietm}, these expressions only apply for parallel magnets (\ie, magnets that have no relative rotation between them).
Furthermore, the moments produced by the magnets at their lever arms around the centre of gravity of the spring are likely to dominate over the torque induced between each pair of magnets, since the rotations will be small but the lever arms will be (relatively) large.
Finally, if small rotations of the spring are assumed, then the effect of this rotation on the forces and torques between the magnets can be neglected; the assumption is that for the purposes of force calculation, the magnets will remain parallel to each other.

\begin{figure}
  \begin{wide}
    \begin{subfigure}[0.4]
      \asyinclude{PhD/Figures/Systems/magrotate2.asy}
      \caption{After rotation.}
    \end{subfigure}\hfil
    \begin{subfigure}[0.4]
      \asyinclude{PhD/Figures/Systems/magrotate3.asy}
      \caption{Small-angle approximation for calculating forces and moments.}
    \end{subfigure}
  \end{wide}
  \caption{}
  \figlabel{magrotate}
\end{figure}

The total torque on a system such as shown in \figref{example-8-mag-spring} is therefore calculated by neglecting the torques between the magnets and by neglecting the effects of rotation on the forces between the magnets.

A static analysis of forces and torques created in this magnetic spring was performed using the geometry shown in \figref{magrotate-schem}. For this analysis, cube magnets are used for simplicity and the magnet gaps in the centred position are defined to be equal between the strong and the stabilising magnets.

\begin{figure}
  \asyinclude{PhD/Figures/Systems/magrotate-schem.asy}
  \caption{Geometry used for analysing the magnetic spring with stable rotation.}
  \figlabel{magrotate-schem}
\end{figure}

\begin{table}
  \caption{Geometric parameters for calculating forces and torques for the magnetic spring shown in \figref{magrotate-schem}.}
  \tablabel{magrotate-param}
  \begin{tabular}{cr}
    \toprule
      $w_1$ &  \SI{100}{mm}  \\
      $w_2$ &  \SI{300}{mm}  \\
      $d_1$ &  \SI{100}{mm}  \\
      $g_1$ &  \SI {10}{mm}  \\
      $s_1$ &  \SI {10}{mm}  \\
      $s_2$ &  \SI  {5}{mm}  \\
    \midrule
      $z_{\text{eq}}$ & \SI{-4}{mm} \\
    \bottomrule
  \end{tabular}
\end{table}

The spring is chosen to have an equilibrium position at $z_{\text{eq}}$ below
the height of the fixed magnets due to the weight being supported.
Spring parameters shown in \tabref{magrotate-param} are chosen to illustrate the concept of having a single degree of instability, and the forces and moments calculated with results shown in \figref{demon-stable-rotation}.
In this figure, the stabilities for displacement and rotation in each degree of freedom are illustrated with the associated forces and torques due to each perturbation.
The spring is in equilibrium at some displacement below the fixed outer magnets such that the force from the magnets balances the load force on the spring; forces in the vertical $z$ direction are given in relative difference terms to this equilibrium force.
In \figref{demon-stable-rotation} negative gradient indicates stability, as the force or torque acts in opposition to the displacement or rotation that caused it.
The figure shows that only the translatory $y$ direction is unstable, and thus in theory only a single actuator would be required to control this system in a non-contact levitating state.

\begin{figure}
  \psfragfig{\phdpath magrotate/fig/stablerot-xyzall}
  \caption{
    Demonstration of single-degree-of-freedom instability.
    The gradients of all forces and torques are negative (infering stability)
    except for the force along the $y$ direction.
  }
  \figlabel{demon-stable-rotation}
\end{figure}

The stability is created by the lever arm of the smaller outer magnets.
The influence of this lever arm on the rotational stiffness of the spring is shown in \figref{stablerot-length}, where the lever arm varies from twice
to four times the centre distance of the strong magnets.
In this range, the rotation stiffness begins negative (as it is without any stabilising magnets) and as the lever arm is increased the stability is increased until it becomes positive between \num{2.5} and~\num{3} times the lever arm of the centre magnets.

\begin{figure}
  \begin{wide}
    \begin{subfigure}
      \psfragfig{\phdpath magrotate/fig/stablerot-length-ry}
      \caption{Around the $y$ axis. Stability decreases with increased lever arm but does not become unstable in the range shown.}
    \end{subfigure}
    \hfil
    \begin{subfigure}
      \psfragfig{\phdpath magrotate/fig/stablerot-length-rz}
      \caption{Around the $z$ axis. Stability ranges from unstable to stable as the lever arm increases.}
    \end{subfigure}
  \end{wide}
  \caption{
    Moment of the magnet spring as it rotates around the $y$ and $z$ axes with a varying lever arm of the stabilising magnets.
    (The moment around the $x$ axis does not vary with lever arm and remains stable.)
    Plots are labelled in terms of the ratio between lever arm of the outer stabilising magnets and the inner strong magnets.
  }
  \figlabel{stablerot-length}
\end{figure}

There is a trade-off between the size of the stabilising magnets and the effectiveness of the main force-providing magnets.
The large lever arm of the stabilising magnets will also affect the stability of the spring in the rotational direction around the $y$ axis; if the stabilising magnets are too large then an added instability will be created, counteracting the added stability around the $z$ axis.
This is illustrated in \figref{stablerot-sizes-all} with spring parameters shown in \tabref{magrotate-param} but with a stabilising magnet size varying from \numrange{0.4}{0.8} of the size of the main magnet size.

\begin{figure}
  \psfragfig{\phdpath magrotate/fig/stablerot-sizes-all}
  \caption{
    Varying the size of the stabilising magnets for the conceptual single-degree-of-freedom magnet spring.
    The lever arm remains constant, in contrast to \figref{demon-stable-rotation}.
    The larger the stabilising magnets the smaller the forces, and the moments around the $y$ and $z$ directions are decrease and increase respectively.
  }
  \figlabel{stablerot-sizes-all}
\end{figure}

Finally, the depth of the spring also affects the stability of this design.
Again using the illustrative parameters of \tabref{magrotate-param}, but with spring depth $d_1$ varying from \SIrange{100}{400}{mm}, the forces and moments are calculated and shown in \figref{stablerot-depth}.
As the spring depth increases, the lever arms in both $y$ and $z$ directions increase, thus increasing the magnitude of the moments produced by a given rotation.
This result indicates that increasing the spring depth does not affect the stability of the spring.

\begin{figure}
  \begin{wide}
    \begin{subfigure}
      \psfragfig{\phdpath magrotate/fig/stablerot-depth-rx}
      \caption{Around the $x$ axis.}
    \end{subfigure}
    \hfil
    \begin{subfigure}
      \psfragfig{\phdpath magrotate/fig/stablerot-depth-rz}
      \caption{Around the $z$ axis.}
    \end{subfigure}
  \end{wide}
  \caption{
    Moment of the magnet spring as it rotates around the $x$ and $z$ axes with a varying spring depth $d_1$, labelled in metres.
    In both cases, the stability increases with greater spring depths.
    (The moment around the $y$ axis does not vary with spring depth and remains stable.)
  }
  \figlabel{stablerot-depth}
\end{figure}

But stability in all but one degrees of freedom is not particularly useful in this configuration because the load-bearing ability of the spring is fairly low; there are no magnets that contribute direction towards creating positive vertical forces.
An alternative magnet design is proposed for this purpose with the goal of retaining the single degree of instability.
An illustrative example of the force and torque characteristics is shown in \figref{demon-stable12}.
While the stiffness along the $y$ direction in this case is very low (and hence close to becoming unstable when the spring is perturbed), this example shows that a design is possible that achieves both sufficient load bearing and minimal instability.

\begin{figure}
  \psfragfig{\phdpath magrotate/fig/stable12-xyzall}
  \caption{
    Demonstration of single-degree-of-freedom instability with greater load bearing.
    The gradients of all forces and torques are negative (infering stability)
    except for the force along the $x$ direction.
  }
  \figlabel{demon-stable12}
\end{figure}


\section{Force coupling between degrees of freedom}
\seclabel{coupling}

A magnetic suspension has inherent dynamic coupling between its degree of
freedom because the magnetic force is a function of displacement in both
horizontal and vertical displacements.

This is essential to consider for the purpose of vibration isolation because
disturbances from the ground can be transmitted via all six degrees of
freedom. Lateral vibrations will cause vertical vibrations; due to symmetry of
the forces in the horizontal directions, vertical disturbances do not couple
to horizontal forces.

An example of this coupling is shown in \figref{coupling-oscillations} for a
suspended magnet that is stabilised in the horizontal direction with the
addition of active positive stiffness. \fxfatal{describe more.}

\begin{figure}
  \psfragfig{\phdpath Simulations/Coupling/fig/coupling-oscillations}
  \caption{Oscillations over time of the displacement of a suspended magnet that is excited through horizontal vibrations of the base magnet. The horizontal vibration couples to the vertical forces.}
  \figlabel{coupling-oscillations}
\end{figure}

In the equilibrium position, the vertical forces are strongest and the
horizontal forces are weakest. The vertical force varies little with
horizontal displacement, as shown in \figref{mag-coupling-equil}, implying
that the coupling between horizontal displacement and vertical force will be
small.

\begin{figure}
  \psfragfig{\phdpath Simulations/Coupling/fig/mag-coupling-equil}
  \caption{Equilibrium position of a suspended magnet bearing a range of
  masses varying with horizontal displacement.
  The displacement is one quarter of the magnet width.}
  \figlabel{mag-coupling-equil}
\end{figure}

The coupling can be quantified by looking at the ratio between horizontal
disturbance displacement range and vertical reaction displacement range. The
larger the horizontal displacement range, the larger the coupling ratio as
shown in \figref{mag-couplingratio-equil}.

\begin{figure}
  \psfragfig{\phdpath Simulations/Coupling/fig/mag-couplingratio-equil}
  \caption{Ratio of vertical to horizontal displacement (`coupling ratio') of
  a suspended magnet bearing a range of masses varying with horizontal
  displacement. The displacement is one quarter of the magnet width.}
  \figlabel{mag-couplingratio-equil}
\end{figure}



\section{Oblique magnetic spring design}

In comparison to using springs with a linear force--displacement relationship for vibration isolation, using permanent magnets for load bearing can be advantageous due to the smaller variation in resonance frequency seen with increased load as a result of a corresponding increased stiffness.
However, two permanent magnets in direct repulsion will not completely eliminate the variability in resonance frequency due to load, only reduce it.

Often, vibration isolation systems are tuned to a narrow-band frequency range and are only effective for a given mass being supported.
A resonance frequency that varies little with load force is desirable due to the resulting predicability of the vibratory behaviour; for example, changes in load force over time will not affect the resonance frequency of the support, which simplifies the system modelling and possible control scenarios.
To achieve this, we wish to design a nonlinear spring such that varying the applied load $F=mg$ results in a change in stiffness $k$ such that the natural frequency $\omega_n=\sqrt{k/m}$ remains constant.

A similar idea using permanent magnets has been mentioned previously by \citet{todaka2001-ietm}, who suggested using a mechanical linkage with two vertically-oriented magnets such that the floating magnet moved in an arc around a fixed magnet due to the effects of the linkage.
However, the parameters governing this design were not investigated at that time; their paper primarily investigated the relationship between resonance frequency and horizontal/vertical displacement between the two permanent magnets.

\citeauthor{bonisoli2007-mrc} used the different approach of coupling a magnetic spring with a linear elastic spring, for which a nonlinear analysis and experimental results were shown \citep{bonisoli2007-mssp, bonisoli2007-mrc}.
Such coupled elastic--magnetic systems have been investigated by several authors to various degrees \citep{trimboli1994, beccaria1997,carrella2008-jsv,zhou2010-jsv}, especially in the design of load-bearing systems with high static stiffness and low dynamic stiffness, also known as `quasi--zero stiffness' devices after their design principle of operating near a point of instability in the force/displacement curve where the dynamic stiffness approaches zero.

In related work, we have previously presented material that uses two magnetic springs, one in attraction and the other in repulsion, to achieve such quasi--zero stiffness effects \citep{robertson2009-jsv}.
In the present work, we exploit the use of magnetic forces in an alternative way that yields a larger region of low stiffness.
As with all magnetic springs, positive stiffness in the vertical direction infers negative stiffness or instability in at least one horizontal direction \citep{bassani2006-meccanica}.
This instability may be countered with a linear bearing (or some other physical constraint) or with an active control system.

This section consists of three main parts: \secref{geom} defines the geometry of the system and presents the theory for analysing its behaviour; \secref{design} uses this theory to demonstrate the advantages of this magnet design, specifically in terms of its natural frequency versus applied load; and \secref{stabl-3dof} extends the model to analyse rotations and torques to investigate the planar stability of the system.

The results presented in this paper are reproducible \citep{kovacevic2007-icassp} with code located at \url{http://www.github.com/wspr/magcode}.
The directory `examples/oblique' contains the code that has been used to directly generate the figures in this paper.


\subsection{Oblique spring geometry and theory}
\seclabel{geom}

A schematic of the oblique magnetic spring is shown in \Figref{schematic}.
Cuboid magnets are used that extend a distance $b$ into the page such that their facing sides are square.
The magnet angle $\mbqmagangle$ can range from \SIrange{0}{90}{\degree}, where $\mbqmagangle=\SI{0}{\degree}$ has horizontally-oriented magnets and $\mbqmagangle=\SI{90}{\degree}$ has vertically-oriented magnets.
The spring is composed of two symmetric pairs of oblique magnets; this ensures the horizontal forces cancel when the spring is centred and force is produced in the vertical direction only.

\begin{figure}
\centering
\asyinclude[width=0.8\linewidth]{PhD/Figures/Systems/oblique.asy}
\caption{Schematic of the oblique-magnet spring.
When magnet offset $\mbqoffset=0$ and displacement $\mbqvdisp=0$, the magnet faces are aligned and touching.
Displacements $\mbqhdisp$ and $\mbqpdisp$ (not shown) are in the horizontal and out-of-plane directions, respectively.}
\figlabel{mbq-schematic}
\end{figure}

Note that opposing magnets have parallel sides and anti-parallel magnetisations; hence, the force calculations by \citet{akoun1984} may be applied to this system.
Their theory is summarised in \ref{app:akoun}.

Two dimensions are used to describe the relative displacement between adjacent magnet pairs.
The magnet offset $\mbqoffset$, fixed during operation, is the horizontal face gap in the centred position, and the displacement $\mbqvdisp$ can be considered as the vertical face gap in the centred position, designed to vary as the load on the spring changes.
With displacement $\mbqvdisp=0$, the facing magnets are horizontally aligned, and with magnet offset $\mbqoffset=0$ also, the magnet faces are touching.
The force and stiffness characteristics of the spring can be affected by adjusting the magnet angle $\mbqmagangle$ and the magnet offset $\mbqoffset$.

We assume that there are no magnetic interactions between magnets from one side of the spring to magnets on the other side.
This can be ensured in practice with a large enough separation between the pairs on opposite sides.
Accordingly, the total force of the spring is given by the superposition of forces for each magnet pair:
\begin{equation}
\mbqforce=\mbqforce_1+\mbqforce_2.
\eqlabel{mbq-force}
\end{equation}
To calculate $\mbqforce_{1}$ and $\mbqforce_{2}$ a local coordinate system  is defined for each magnet pair aligned in each direction of magnetisation.
Then $\mbqforce_1=\mbqrot{\theta} \mbqmforce_1$ and $\mbqforce_2=\mbqrot{\phi}\mbqmforce_2$, where $\phi=\pi-\theta$, $\mbqmforce_{1}$ and $\mbqmforce_{2}$ are the forces between the magnet pairs in the local coordinate systems of the base magnets, and $\mbqrot{\cdot}$ is the planar rotation matrix
\begin{equation}
\def\t{t}
\mbqrot{\t} = \bmatrix
 \cos \t & -\sin \t & 0 \\
 \sin \t &  \cos \t & 0 \\
0 & 0 & 1 \\
\endbmatrix
.
\end{equation}

These forces $\mbqmforce_{1}$ and $\mbqmforce_{2}$ are calculated with $\mbqmforce_{i}=\vect F_m(\mbqmdispl_{i})$ where $\vect F_m(\cdot)$ given in \eqref{akoun} is the force between parallel cuboid magnets \citep{akoun1984} and $\mbqmdispl_{1}$ and $\mbqmdispl_{2}$ are the displacement vectors between the magnet centres in the local coordinate system of the magnets given by
\begin{align}
  \mbqmdispl_1 &=
    \mbqrot{-\theta}
    \begin{bmatrix}d + \mbqhdisp \\ \mbqvdisp \\ \mbqpdisp \end{bmatrix} +
    \begin{bmatrix}a\\0\\0\end{bmatrix} , &
  \mbqmdispl_2 &=
    \mbqrot{-\phi}
    \begin{bmatrix}-d+ \mbqhdisp \\ \mbqvdisp \\ \mbqpdisp \end{bmatrix} +
    \begin{bmatrix}a \\ 0 \\ 0\end{bmatrix} ,
\end{align}
where $a$ and $d$ are geometric parameters defined in \Figref{schematic}, and $[\mbqhdisp,\mbqvdisp,\mbqpdisp]\T$ are displacements in the horizontal, vertical, and out-of-plane directions, respectively. In \secref{stabl-3dof} this model will be extended with a small angle approximation to calculate forces and torques due to rotation around the $\mbqpdir$ axis.


\subsection{Influence of design parameters}
\seclabel{design}

The analysis in \secref{geom} allow us to calculate total force $\mbqforce$ in terms of displacement.
This section will outline the influence of the various design parameters on the force, stiffness, and natural frequency characteristics of the system.
To begin, vertical force as a function of vertical displacement $\mbqvforce(\mbqvdisp)=\mbqvforce(0,\mbqvdisp,0)$ will be considered (with other displacements $\mbqhdisp=\mbqpdisp=0$).

\subsubsection{Magnet shape}

For this entire analysis, we use a magnet size ratio of $\mbqmagratio=\mbqmagh/\mbqmagw=0.4$.
Depending on the exact desired displacement range, values around this magnet ratio produce the maximum force between two opposing cuboid magnets for a fixed magnet volume \citep{robertson2010-maglett-fix}.
For the analysis to follow directly, the magnet volume is fixed at $\mbqvolume=\mbqmagh\mbqmagw^2=(\SI{10}{mm})^3$.
We define a `unit length' $\mbqunit=\sqrt[3]{V}=\SI{10}{mm}$ and refer in the subsequent analysis to the `magnet gap ratio' defined as $\mbqoffset/\mbqunit$.
The effects of increasing the magnet volume are addressed in \secref{mbq-vol}.


\subsubsection{Magnet angle}

Having chosen the magnet size ratio, there are two parameters that influence the force and stiffness characteristics of the spring; these are the magnet angle~$\mbqmagangle$ and the magnet offset~$\mbqoffset$.
Variations in the magnet angle affect the force characteristics to a greater extent and will be examined first.

The theory outlined in \secref{geom} was used to calculate force versus displacement curves over a range of magnet angles from \SIrange{0}{90}{\degree}.
These are shown in \Figref{mbq-fvx-angle}, which shows a dramatic effect on the force and stiffness characteristics due to changes in the inclination angle of the magnets.
Of particular interest are the low-stiffness regions in the force curves in \Figref{mbq-fvx-angle}; these are potential areas for improved vibration isolation.

\begin{figure}
\centering
\pregen{\psfragfig{examples/oblique/fig/mbq-fvx-angle}}
\caption{Force versus displacement for magnet angles from \SIrange{0}{90}{\degree} in \SI{5}{\degree} increments.
The offset distance between the magnets is zero.
Light gray lines indicate negative stiffness (instability) and markers show the position of quasi--zero stiffness.}
\figlabel{mbq-fvx-angle}
\end{figure}

\Figref{mbq-fvx-angle} is difficult to use for design purposes because the required load force will affect the dynamic stiffness as the system sits in equilibrium at a given displacement.
However, this equilibrium displacement is not a parameter of particular interest provided the magnetic spring is still levitating.
Therefore, for interpreting the operating conditions of the system it is more useful to consider the relationship between load force and natural frequency.

The vertical stiffness $\mbqvstiff$ can be obtained by numerical differentiation of the vertical force $\mbqvforce$:
\begin{equation}
  \mbqvstiff(\mbqvdisp) = - \tfrac{1}{2}\bigl[\mbqvforce(\mbqvdisp+\delta)-\mbqvforce(\mbqvdisp-\delta)\bigr]/\delta ,
\end{equation}
where $\delta$ is a small displacement increment.
The natural frequency $\omega_n(\mbqvdisp)$ as a function of displacement was calculated in terms of this vertical stiffness $\mbqvstiff$ with
\begin{equation}
  \omega_n(\mbqvdisp) = \sqrt{\frac{\mbqvstiff(\mbqvdisp)}{\mbqmasseq}} = \sqrt{\frac{\mbqvstiff(\mbqvdisp)}{\mbqvforce(\mbqvdisp)/g}}
\end{equation}
where the equivalent mass $\mbqmasseq=\mbqvforce(\mbqvdisp)/g$ is the mass required to load the spring such that its equilibrium position lies at the displacement $\mbqvdisp$.
The force corresponding to this equivalent mass is referred to as the `load force'.

By plotting natural frequency as a function of load force in \Figref{mbq-wvf-angle}, we can choose a magnet angle based on a certain load to satisfy a desired natural frequency.
Specifically, for the case of zero offset between the magnets (\Figref{mbq-wvf-angle-1}), it can be seen that at a magnet angle of \SI{35}{\degree} the natural frequency is almost independent of force for a large range of applied load (approximately $\SI{30}{N}\pm\SI{10}{N}$).

\begin{figure}
\centerline{%
\subfloat
  [Zero offset between the magnets.
   At \SI{35}{\degree} the natural frequency is near-constant for a wide range of load forces.
  \figlabel{mbq-wvf-angle-1}]
  {\pregen{\psfragfig{examples/oblique/fig/mbq-wvf-angle}}}
\qquad
\subfloat
  [Gap ratio of \num{0.25}.
   Near-constant natural frequency occurs at \SI{70}{\degree}.
   \figlabel{mbq-wvf-angle-2}]
  {\pregen{\psfragfig{examples/oblique/fig/mbq-wvf-angle2}}}%
}
\caption{Natural frequency versus load force for magnet angles from \SIrange{0}{90}{\degree} in \SI{5}{\degree} increments.}
\figlabel{mbq-wvf-angle}
\end{figure}


\subsubsection{Magnet offset}

Having chosen the magnet size ratio, there are two parameters that influence the force and stiffness characteristics of the spring; these are the magnet angle~$\mbqmagangle$ and the magnet offset~$\mbqoffset$.
Variations in the magnet angle affect the force characteristics to a greater extent and will be examined first.

The theory outlined in \secref{geom} was used to calculate force versus displacement curves over a range of magnet angles from \SIrange{0}{90}{\degree}.
These are shown in \Figref{mbq-fvx-angle}, which shows a dramatic effect on the force and stiffness characteristics due to changes in the inclination angle of the magnets.
Of particular interest are the low-stiffness regions in the force curves in \Figref{mbq-fvx-angle}; these are potential areas for improved vibration isolation.

\begin{figure}
\centering
\pregen{\psfragfig{examples/oblique/fig/mbq-fvx-angle}}
\caption{Force versus displacement for magnet angles from \SIrange{0}{90}{\degree} in \SI{5}{\degree} increments.
The offset distance between the magnets is zero.
Light gray lines indicate negative stiffness (instability) and markers show the position of quasi--zero stiffness.}
\figlabel{mbq-fvx-angle}
\end{figure}

\Figref{mbq-fvx-angle} is difficult to use for design purposes because the required load force will affect the dynamic stiffness as the system sits in equilibrium at a given displacement.
However, this equilibrium displacement is not a parameter of particular interest provided the magnetic spring is still levitating.
Therefore, for interpreting the operating conditions of the system it is more useful to consider the relationship between load force and natural frequency.

The vertical stiffness $\mbqvstiff$ can be obtained by numerical differentiation of the vertical force $\mbqvforce$:
\begin{equation}
  \mbqvstiff(\mbqvdisp) = - \tfrac{1}{2}\bigl[\mbqvforce(\mbqvdisp+\delta)-\mbqvforce(\mbqvdisp-\delta)\bigr]/\delta ,
\end{equation}
where $\delta$ is a small displacement increment.
The natural frequency $\omega_n(\mbqvdisp)$ as a function of displacement was calculated in terms of this vertical stiffness $\mbqvstiff$ with
\begin{equation}
  \omega_n(\mbqvdisp) = \sqrt{\frac{\mbqvstiff(\mbqvdisp)}{\mbqmasseq}} = \sqrt{\frac{\mbqvstiff(\mbqvdisp)}{\mbqvforce(\mbqvdisp)/g}}
\end{equation}
where the equivalent mass $\mbqmasseq=\mbqvforce(\mbqvdisp)/g$ is the mass required to load the spring such that its equilibrium position lies at the displacement $\mbqvdisp$.
The force corresponding to this equivalent mass is referred to as the `load force'.

By plotting natural frequency as a function of load force in \Figref{mbq-wvf-angle}, we can choose a magnet angle based on a certain load to satisfy a desired natural frequency.
Specifically, for the case of zero offset between the magnets (\Figref{mbq-wvf-angle-1}), it can be seen that at a magnet angle of \SI{35}{\degree} the natural frequency is almost independent of force for a large range of applied load (approximately $\SI{30}{N}\pm\SI{10}{N}$).

\begin{figure}
\centerline{%
\subfloat
  [Zero offset between the magnets.
   At \SI{35}{\degree} the natural frequency is near-constant for a wide range of load forces.
  \figlabel{mbq-wvf-angle-1}]
  {\pregen{\psfragfig{examples/oblique/fig/mbq-wvf-angle}}}
\qquad
\subfloat
  [Gap ratio of \num{0.25}.
   Near-constant natural frequency occurs at \SI{70}{\degree}.
   \figlabel{mbq-wvf-angle-2}]
  {\pregen{\psfragfig{examples/oblique/fig/mbq-wvf-angle2}}}%
}
\caption{Natural frequency versus load force for magnet angles from \SIrange{0}{90}{\degree} in \SI{5}{\degree} increments.}
\figlabel{mbq-wvf-angle}
\end{figure}


\subsubsection{Horizontal and out-of-plane stability due to vertical displacement}
\seclabel{stabl-v}

In \Figref{mbq-wvf-angle,mbq-kvf-gaps}, design curves were presented under the assumption that the vertical stiffness only was under consideration.
Due to the inclination of the magnets, however, the horizontal and out-of-plane stiffness will also vary as the magnet spring parameters are changed.
If active control is used to constrain the floating magnets, it may be desirable to minimise the horizontal instability of the magnet spring in order to reduce the number of sensors and actuators required to stabilise the system.

The horizontal stiffness is calculated with a numerical gradient of the forces when the magnets are centred and when a small horizontal displacement~$\mbqhdisp$ is applied.
In this case, the horizontal force $\mbqhforce$ will be considered as a function of vertical displacement $\mbqvdisp$, with horizontal stiffness calculated as
\begin{equation}
\mbqhstiff(\mbqvdisp) = -\frac{1}{\delta}\biggl[\mbqhforce(\delta,\mbqvdisp,0)-\mbqhforce(0,\mbqvdisp,0)\biggr] = -\frac{1}{\delta}\mbqhforce(\delta,\mbqvdisp,0),
\end{equation}
where $\delta$ is a small displacement increment.
An equivalent formulation can be used to calculate the out-of-plane stiffness due to a vertical displacement based on the out-of-plane force $\mbqpforce$:
\begin{equation}
\mbqpstiff(\mbqvdisp) = -\frac{1}{\delta}\biggl[\mbqpforce(0,\mbqvdisp,\delta)-\mbqpforce(0,\mbqvdisp,0)\biggr] = -\frac{1}{\delta}\mbqpforce(0,\mbqvdisp,\delta).
\end{equation}

An example of spring parameters that achieve positive stability in both the vertical and horizontal directions is shown in \Figref{mbq-kvxyz-gaps-v,mbq-kvxyz-gaps-h}.
This is possible as the stiffness in the out-of-the-page direction of \Figref{schematic} is always negative (\Figref{mbq-kvxyz-gaps-p}), and as a consequence of Earnshaw's theorem \citep{bassani2006-meccanica} the stiffnesses in each direction must sum to zero; that is, $\mbqhstiff(\mbqvdisp)+\mbqvstiff(\mbqvdisp)+\mbqpstiff(\mbqvdisp)=0$.

\begin{figure}
\centerline{%
\subfloat[Vertical stiffness.\figlabel{mbq-kvxyz-gaps-v}]
  {\pregen{\psfragfig[crop=preview]{examples/oblique/fig/mbq-kvx-gaps}}}%
\subfloat[Horizontal stiffness.\figlabel{mbq-kvxyz-gaps-h}]
  {\pregen{\psfragfig[crop=preview]{examples/oblique/fig/mbq-kvy-gaps}}}%
\subfloat[Out-of-plane stiffness.\figlabel{mbq-kvxyz-gaps-p}]
  {\pregen{\psfragfig[crop=preview]{examples/oblique/fig/mbq-kvz-gaps}}}%
}
\caption{Stiffness in three directions versus displacement for a gap ratio of \num{0.2} and magnet angles from \SIrange{0}{90}{\degree} in \SI{5}{\degree} increments (arrows indicate increasing magnet angle).
For the horizontal and vertical stiffness plots (a)~and (b), regions of positive stiffness for both directions are coloured; regions of gray indicate that either the vertical and/or horizontal stiffness is negative in that position for that magnet angle.
%Out-of-plane stiffness plot~(c) shows instability over the entire displacement range.
}
\figlabel{mbq-kvxyz-gaps}
\end{figure}

The drawback of achieving minimal instability is a reduction in the achievable low-stiffness regions of the spring.
\Figref{mbq-wvf-angle-stabl} shows a plot of natural frequency versus load force for a magnet angle of \SI{40}{\degree} and for a variety of magnet gaps.
In this graph, regions of negative horizontal stiffness have been de-emphasised by drawing those sections of the curves in light grey.
It can be seen here that the `flat' sections of the curve (that correspond to configurations of largely-flat natural frequency against load force) occur largely in the regions of horizontal instability.
\Figref{mbq-wvf-angle-stabl} also demonstrates that when designing the system for horizontal stiffness, a larger magnet gap increases the displacement range of the magnetic spring, albeit with a decrease in possible load force.

\begin{figure}
\centering
\pregen{\psfragfig{examples/oblique/fig/mbq-wvf-angle-stabl}}
\caption{Natural frequency versus load force for gap ratios from \num{0.05} to \num{0.5} in \num{0.05} increments and a magnet angle of \SI{40}{\degree}.
Regions of negative horizontal stiffness are drawn in light gray, and displacements are labelled with dotted lines for every change in displacement of \SI{1}{mm}.}
\figlabel{mbq-wvf-angle-stabl}
\end{figure}

A more detailed investigation on the planar stability of the system is performed in \secref{stabl-3dof}.


\subsubsection{Magnet volume}
\seclabel{mbq-vol}

Having examined the influence of magnet angle and magnet gap on the natural frequency and load force characteristics, it is essential to confirm that this arrangement is scalable for arbitrary loads by increasing the magnet volumes.
With fixed magnet gap ratio of 0.2 and magnet angle of \SI{40}{\degree}, the natural frequency/force characteristic with volumes from $(\SI{10}{mm})^3$ to $(\SI{50}{mm})^3$ is shown in \Figref{mbq-wvf-vol}, which shows that larger magnet sizes permit larger load forces while also retaining a low natural frequency.
In fact, the natural frequency decreases with larger magnet sizes.
This shows that the oblique magnet spring system is suitable for bearing large loads with low stiffness, and fits into the category of springs that exhibit `high-static--low-dynamic' stiffness \citep[e.g.,][]{carrella2008-jsv}.

\begin{figure}
\centering
\pregen{\psfragfig{examples/oblique/fig/mbq-wvf-vol}}
\caption{Natural frequency versus load force for a magnet gap ratio of \num{0.2} and a magnet angle of \SI{40}{\degree} over a range of magnet volumes from $(\SI{10}{mm})^3$ to $(\SI{50}{mm})^3$.
The displacement ranges are proportional to the magnet size such that the system with magnet volume $(\SI{10}{mm})^3$ undergoes displacement from \SIrange{0}{10}{mm} and the system with volume $(\SI{50}{mm})^3$ moves over \SIrange{0}{50}{mm}.
Regions of negative horizontal stiffness are drawn in light gray.}
\figlabel{mbq-wvf-vol}
\end{figure}

\subsubsection{Design based on these results}

Clearly there is a large space of design possibilities for such a magnet arrangement.
Using these results requires an iterative approach based around the following constraints:
\begin{enumerate}
\item Magnets are large enough to bear the required load variance, which will inform a maximum and minimum magnet clearance;
\item Stiffness at the equilibrium point is satisfied by varying the magnet offset and angle;
\item Load variation is modelled and natural frequency remains within acceptable limits.
\end{enumerate}
Generally, a larger magnet size will permit a larger range of approximate natural frequency invariance (\Figref{mbq-wvf-vol}).
Only by evaluating a number of trial solutions for magnet angle and magnet offset can an acceptable design be found to satisfy a specified amount of load variability.



\subsection{Investigation into planar stability}
\seclabel{stabl-3dof}

In \secref{stabl-v}, the translational stiffness of the system in three dimensions was discussed in terms of a change in the vertical equilibrium position of the spring (corresponding to a variation in applied load, say).
However, this is not enough to establish the global stability of the system due to cross-axis coupling and rotational affects that were not included as part of the model.
Here, the planar stability of the system will be investigated to attempt to provide some picture of the complex kinetics seen due to planar translation and rotation; the system is assumed to be constrained in a single plane for this analysis with geometry shown in \figref{mbq-angle-schem}.

An analytical formulation for calculating the torques between two cuboid parallel magnets has recently been presented by \citet{janssen2010-ietm}.
The torque equations will not be reproduced here but they follow a similar (albeit more complex) form than that of \eqref{akoun} for force.
Note that, with reference to \figref{mbq-angle-schem}, the torques are \emph{not} calculated by using the already-calculated force terms (the blue vectors in that figure); the torque is calculated using a separate integral equation that takes the lever arm into account.

Note, however, that the force and torque equations do not permit a relative rotation between the two interacting magnets (their sides must remain parallel).
Therefore, in order to analyse the rotational stability of the magnetic system a small angle approximation must be made, which is illustrated in \figref{mbq-angle-schem-approx}:
due to overall rotation $\mbqrotz$ of the spring the moving magnets will translate around their lever arms $\mbqlever$ (the centre of rotation is here assumed to be the mid-point between the magnet centres) but their angle to the horizontal remains fixed.
Calculating the force and torque in this way is only valid for small rotations, but is sufficient to establish relationships regarding rotational stability and cross-coupling with translational forces.

\begin{figure}
\centering
\pregen{\psfragfig{examples/oblique/fig/mbq-angle-schem}}
\caption{Geometry of the planar system in which forces and torques due to rotation $\mbqrotz$ are calculated.
The system is shown with $\mbqrotz=\SI{15}{\degree}$, lever arm ratio $\mbqlever/\mbqunit=\num{2}$, magnet angle $\mbqmagangle=\SI{30}{\degree}$ and magnet gap ratio $\mbqoffset/\mbqunit=\num{0.5}$.
}
\figlabel{mbq-angle-schem}
\end{figure}

\begin{figure}
\centerline{
\subfloat[Without rotation.]
  {\pregen{\psfragfig{examples/oblique/fig/mbq-angle-schem-1}}}\qquad
\subfloat[With rotation shown in black; the unrotated position, as in (a), is shown in light grey.]
  {\pregen{\psfragfig{examples/oblique/fig/mbq-angle-schem-2}}}\qquad
\subfloat[With small angle approximation of zero magnet rotation shown in colour; the rotated magnets, as in (b), are shown in black.]
  {\pregen{\psfragfig{examples/oblique/fig/mbq-angle-schem-3}}}
}
\caption{Visual representation of the small angle approximation in which the magnet structure rotates but the magnets themselves are assumed to remain parallel to their respective partner.}
\figlabel{mbq-angle-schem-approx}
\end{figure}

\subsubsection{Theory for planar force and torque calculations}

The model developed for this system in \Secref{geom} is here extended to calculate torques and allow (small) rotations, both around the $\mbqpdir$ axis only.

The vector equations for this new geometry require an additional term to accomodate rotation.
First define two lever arm vectors for each magnet with respect to a centre of rotation denoted by
$
\vect l_1 = [-\mbqlever, 0, 0]\T
$ and
$
\vect l_2 = [ \mbqlever, 0, 0]\T
$
in the local coordinate system of the spring (although other centres of rotation are certainly possible).
These lever arms define additional translations of the magnets $\vect p_1$ and $\vect p_2$ due to rotation of the system:
\begin{align}
\eqlabel{vec-levers}
  \vect p_1 &= \mbqrot{\mbqrotz}\vect l_1 - \vect l_1,
&
  \vect p_2 &= \mbqrot{\mbqrotz}\vect l_2 - \vect l_2.
\end{align}
The displacement vectors (again in the coordinate system of the magnets) between the magnet pairs are then given by
\begin{align}
\eqlabel{vec-displ}
  \mbqmdispl_1 &=
    \mbqrot{-\theta}
    \left(
    \vect p_1 +
    \begin{bmatrix}\mbqoffset + \mbqhdisp \\ \mbqvdisp \\ \mbqpdisp \end{bmatrix}
    \right) +
    \begin{bmatrix}a\\0\\0\end{bmatrix} , &
  \mbqmdispl_2 &=
    \mbqrot{-\phi}
    \left(
    \vect p_2 +
    \begin{bmatrix}-\mbqoffset+ \mbqhdisp \\ \mbqvdisp \\ \mbqpdisp \end{bmatrix}
    \right) +
    \begin{bmatrix}a \\ 0 \\ 0\end{bmatrix} .
\end{align}
Also, the displacement vectors in the coordinate system of the magnets from the spring magnet centres to the centre of rotation (required for torque calculation) are given by
\begin{align}
\eqlabel{vec-displ-local}
  \vect t_1 &= \mbqrot{-\theta}\left( -\mbqrot{\mbqrotz}\vect l_1 \right),
&
  \vect t_2 &= \mbqrot{-\phi}\left( -\mbqrot{\mbqrotz}\vect l_2 \right).
\end{align}
\Eqrangeref{vec-levers}{vec-displ-local} are kept in a more general transformation matrix form to accomodate extensions into more rotational degrees of freedom.

As before, the total force is
\begin{equation}
\mbqforce=\mbqforce_1+\mbqforce_2=\mbqrot{\theta} \vect F_m(\mbqmdispl_1)+\mbqrot{\phi}\vect F_m(\mbqmdispl_2),
\eqlabel{mbq-force3}
\end{equation}
where $\vect F_m(\cdot)$ is the magnet force equation given in \eqref{akoun}. The torque is not affected by the rotation transformations (recall it is around the $\mbqpdir$ axis only) and is given by the sum of torques between the magnet pairs
\begin{equation}
\mbqptorque= T_{m_\mbqpdir}(\mbqmdispl_1,\vect t_1)+ T_{m_\mbqpdir}(\mbqmdispl_2,\vect t_2),
\eqlabel{mbq-torque}
\end{equation}
where $T_{m_\mbqpdir}$ is the appropriate component of the magnetic torque equation given by \citet{janssen2010-ietm}.
(To be precise, the equations of Janssen et al.\ are written for magnets with $z$ direction magnetisation, so they require a coordinate transformation as the analysis here casts the magnetisations into the $x$ direction.)

\subsubsection{Planar stability results}

The system is not expected to be completely stable due to cross-axis coupling. For example, after horizontal translation the magnetic force will become asymmetric and a torque will result. Similarly, after a rotation the reverse will occur and a horizontal force will be produced, which can be seen from the resultant vectors in \figref{mbq-angle-schem,mbq-rot-ex-diag}. Due to the large number of possible magnet parameter combinations, only a select number of cases will be analysed in detail here.

The torsional stability due to rotation is affected by the geometric parameters of the system as shown by example in \figref{mbq-rot-ex}, for which each geometry is drawn to relative scale in \figref{mbq-rot-ex-diag}.
Further torque variations can be effected by varying the lever arm and the position of the centre of rotation.
The validity of the torque calculations can be assessed by comparison with the effect of the force terms as if the latter were being used to calculate torque directly using the equation
\begin{equation}
\eqlabel{mbq-fake-torque}
\mbqptorque \approx \mbqlever (-\mbqforce_1+\mbqforce_2) \bm\cdot \begin{bmatrix} -\sin\mbqrotz \\\phantom{-}\cos\mbqrotz\end{bmatrix}
\end{equation}
where the dot product produces the component of force perpendicular to the lever arm.
Torques calculated in this manner are shown in \figref{mbq-rot-ex} as dashed lines and it can be seen they match closely for small angles of rotation.

\begin{figure}
\centering
\pregen{\psfragfig{examples/oblique/fig/mbq-rot-ex}}
\caption{Torque versus rotation for a certain spring configuration with parameters
$\mbqunit = \mbqvdisp = \SI{10}{mm}$,
$\mbqmagangle = \SI{30}{\degree}$, and
$\mbqlever/\mbqunit = \num{2}$.
Dashed lines show for verification torque as if calculated using the magnetic forces around their lever arms only (\eqref{mbq-fake-torque}). Notice that varying the magnet gap ratio (shown) can vary the rotational stiffness from stable ($\mbqoffset/\mbqunit=\{0.25, 0.5\}$) to unstable ($\mbqoffset/\mbqunit=1$). Geometries for these three configurations are shown in \Figref{mbq-rot-ex-diag}.}
\figlabel{mbq-rot-ex}
\end{figure}

\begin{figure}
\centerline{
\subfloat[$\mbqoffset/\mbqunit=0.25$]
  {\pregen{\psfragfig{examples/oblique/fig/mbq-rot-ex-diag-1}}}\qquad\qquad
\subfloat[$\mbqoffset/\mbqunit=0.5$]
  {\pregen{\psfragfig{examples/oblique/fig/mbq-rot-ex-diag-2}}}\qquad\qquad
\subfloat[$\mbqoffset/\mbqunit=1$]
  {\pregen{\psfragfig{examples/oblique/fig/mbq-rot-ex-diag-3}}}
}
\caption{Visual representation of the forces and torques at a rotation of $\mbqrotz=\SI{10}{\degree}$ corresponding to the stability results shown in \Figref{mbq-rot-ex}. Force vector lengths are proportional to their magnitude, but torque arc lengths are not.}
\figlabel{mbq-rot-ex-diag}
\end{figure}

Stability results will be shown using perturbations of a dynamic simulation of the system in a small number of variations of design parameters.
The equations of motion are defined as
\begin{align}
\begin{split}
\mbqmass \ddot \mbqhdisp &= \mbqhforce(\mbqhdisp,\mbqvdisp,\mbqrotz) - \mbqhdamp \dot \mbqhdisp , \\
\mbqmass \ddot \mbqvdisp &= -\mbqmass g + \mbqvforce(\mbqhdisp,\mbqvdisp,\mbqrotz) - \mbqvdamp \dot \mbqvdisp , \\
\mbqmomentofinertia \ddot \mbqrotz &= \mbqptorque(\mbqhdisp,\mbqvdisp,\mbqrotz) - \mbqzrotdamp \dot \mbqrotz,
\end{split}
\eqlabel{mbq-dyn}
\end{align}
for which a time-domain solution was produced numerically with a Runge-Kutta technique (Matlab's \texttt{ode45} function). Viscous damping terms $\mbqhdamp$, $\mbqvdamp$, and $\mbqzrotdamp$ account for energy loss in the system. The force and torque terms are those defined in \eqref{mbq-force3,mbq-torque} respectively.

The parameters used in \Tabref{mbq-dyn-param} were used for the dynamic simulations. The equilibrium displacement $y_0$ is found by numerically inverting a static analysis of the magnet forces $\mbqvforce(0,\mbqvdisp_0,0)=\mbqmass g$; a damping ratio of \SI{20}{\%} is assumed to account for eddy current damping and any other energy losses; and the moment of inertia is approximated with $\mbqmomentofinertia=\tfrac13\mbqmass\mbqlever^2$. The parameters have been selected such that the vertical, horizontal, and rotational direct stiffnesses are all positive for this equilibrium displacement.

\begin{table}
\caption{Parameters used for the dynamic simulations.}
\tablabel{mbq-dyn-param}
\centering
\begin{tabular}{@{}l >{$}c<{$} c l >{$}c<{$} c@{}}
\toprule
\multicolumn{3}{c}{Explicit parameters} & \multicolumn{3}{c}{Implicit parameters} \\
\cmidrule(r){1-3}
\cmidrule(l){4-6}
 Mass             & \mbqmass & \SI{3}{kg}            & Equilibrium position & {\mbqvdisp}_0 & \SI{14.04}{mm} \\
 Damping ratio    & \zeta  & \num{0.2}               & Moment of inertia& \mbqmomentofinertia & \SI{1.60}{g/m^2} \\
 Magnetisation    & J_1, J_2  & \SI{1}{T}            & Horizontal stiffness & \mbqhstiff & \SI{15.43}{N/m} \\
 Unit length      & \mbqunit & \SI{20}{mm}           & Vertical stiffness   & \mbqvstiff & \SI{170.5}{N/m} \\
 Magnet angle     & \mbqmagangle & \SI{45}{\degree}  & Rotational stiffness & \mbqzrotstiff & \SI{31.3}{mN.m/rad{.}} \\
 Offset ratio     & \mbqoffset/\mbqunit  & \num{0.4} & Horizontal damping & \mbqhdamp & \SI{9.05}{kg/s} \\
 Magnet ratio     & \mbqmagratio  & \num{0.4}        & Vertical damping   & \mbqvdamp & \SI{2.72}{kg/s} \\
 Lever ratio      & \mbqlever/\mbqunit  & \num{2}    & Rotational damping & \mbqzrotdamp & \SI{2.83}{mN.m.s/rad{.}} \\
\bottomrule
\end{tabular}\end{table}

\begin{figure}
\centerline{
\subfloat[Horizontal and vertical displacement from the equilibrium position.]
  {\pregen{\psfragfig{examples/oblique/fig/mbq-dyn-xy}}}\qquad
\subfloat[Displacement map with colour progressing with time from dark to light.]
  {\pregen{\psfragfig{examples/oblique/fig/mbq-dyn-xy-map}}}
}
\caption{Dynamic simulation of system defined by \eqref{mbq-dyn} with perturbation of $\Delta x=\Delta y=\SI{1.5}{mm}$ and constraint on rotational $\mbqrotz$.}
\figlabel{mbq-dyn-xy}
\end{figure}

Assuming that the device is always designed to move freely in the vertical direction to accommodate changing load, there are three  regimes in which we would like to illustrate the stability of the system:
\begin{enumerate}
\item constraining rotation;
\item constraining horizontal displacement;
\item unconstrained.
\end{enumerate}
It is evident that the case of constraining both rotation and horizontal displacement will be stable provided the vertical stiffness is positive.
The first of the dynamic simulations presented is displacement in the $x$--$y$ plane with constrained rotation.
Given the system described in \Eqref{mbq-dyn} and a perturbation of $\Delta x=\Delta y=\SI{1.5}{mm}$, the resultant dynamics are shown in \Figref{mbq-dyn-xy} as displacements from the equilibrium position of the spring.
While this is close to the maximum perturbation for this system before instability, this example illustrates that there is a region near the equilibrium position within which stability is achieved.

\begin{figure}
\centerline{
\subfloat[Relative vertical displacement $\mbqvdisp-\mbqvdisp_0$.]
  {\pregen{\psfragfig{examples/oblique/fig/mbq-dyn-yr-y}}}\qquad
\subfloat[Rotation $\mbqrotz$.]
  {\pregen{\psfragfig{examples/oblique/fig/mbq-dyn-yr-r}}}
}
\caption{Dynamic simulation with perturbation of $\Delta \mbqvdisp=\SI{1.5}{mm}$ and $\Delta \mbqrotz=\SI{3}{\degree}$ with constraint in horizontal displacement $\mbqhdir$.}
\figlabel{mbq-dyn-yr}
\end{figure}

The second stability example constrains horizontal displacement while allowing free rotation of the system. A perturbation of $\Delta y=\SI{1.5}{mm}$ and $\Delta \varphi=\SI{3}{\degree}$ is modelled with dynamic results shown in \Figref{mbq-dyn-yr}.
Again, with one constraint on the system there is a stable region around the equilibrium point.
In fact, this arrangement is more stable than the last as there is less cross-coupling between the vertical and rotational degrees of freedom.

\begin{figure}
\centerline{
\subfloat[Horizontal displacement $\mbqhdisp$.]
  {\pregen{\psfragfig{examples/oblique/fig/mbq-dyn-xyr-x}}}\qquad
\subfloat[Relative vertical displacement $\mbqvdisp-\mbqvdisp_0$.]
  {\pregen{\psfragfig{examples/oblique/fig/mbq-dyn-xyr-y}}}\qquad
\subfloat[Rotation $\mbqrotz$.]
  {\pregen{\psfragfig{examples/oblique/fig/mbq-dyn-xyr-r}}}
}
\caption{Dynamic simulation without constraint and vertical perturbation only. Despite `stable' stiffnesses in each direction (seen in \figref{mbq-dyn-xy,mbq-dyn-yr}), the unconstrained system is unstable due to cross-axis coupling.}
\figlabel{mbq-dyn-xyr}
\end{figure}

Finally, it might now be expected that since stability was achieved in both $x$--$y$ and $y$--$\varphi$ regimes, an unconstrained system might be similarly stable.
Unfortunately this is not the case, as cross-coupling influences are too great and even an incremental perturbation eventually leads to instability as shown in \Figref{mbq-dyn-xyr}.
(There is a macroscopic perturbation of $\Delta\mbqvdisp=\SI{-1}{mm}$ and incremental perturbations of $\Delta\mbqhdisp=\SI{1e-9}{m}$ and $\Delta\mbqrotz=\SI{1e-9}{deg}$.)
Despite achieving positive direct stabilities in all three degrees of freedom, some form of control over this cross-coupling instability is required for stable operation; this could take the form of passive bearings or non-contact electromagnetic actuators.

\subsection{Conclusions and future work}

In this paper, a particular magnet geometry was investigated for the purposes of developing a spring for vibration isolation with the goal of a load-invariant natural frequency.
The resonance--load relationship was found to have significant flat areas, indicating this goal could be achieved for certain geometries.
The load-bearing capacity could be largely increased by scaling the volumes of the magnets; this was shown to have small effect on the natural frequency of the system.

Since the system uses magnetic levitation to achieve its force characteristic, there are various instabilities inherent in its dynamics.
Some of these instabilities due to coupling between horizontal and rotational degrees of freedom have been highlighted, but a complete six degree of freedom analysis must await future developments in magnetic torque modelling.
A physical realisation of this system is currently under construction (using a combination of various phyical constraints and active control to achieve stability), and its details will be reported at a future date.

